<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:50:55 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>HandlerDecorator (ratpack-core 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HandlerDecorator (ratpack-core 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":17,"i2":17,"i3":17,"i4":17,"i5":17};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/handling/Handlers.html" title="class in ratpack.handling"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/handling/HandlerDecorator.html" target="_top">Frames</a></li>
<li><a href="HandlerDecorator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.handling</div>
<h2 title="Interface HandlerDecorator" class="title">Interface HandlerDecorator</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">HandlerDecorator</span></pre>
<div class="block">Decorates a handler, effectively wrapping it.
 <p>
 Handler decorators can be used to contribute to the handler chain from the <a href="../../ratpack/server/RatpackServerSpec.html#registry-ratpack.registry.Registry-"><code>server registry</code></a>.
 It is often used by libraries/extensions to participate in request handling in order to set up infrastructure for downstream handlers.
 <p>
 The <a href="../../ratpack/handling/HandlerDecorator.html#prepend-ratpack.handling.Handler-"><code>prepend(Handler)</code></a> method is a convenient way to create a decorator that simply prepends a given handler to the application handlers.
 <pre class="java"><code>import ratpack.handling.Handler;
 import ratpack.handling.HandlerDecorator;
 import ratpack.handling.Context;
 import ratpack.util.Types;
 import ratpack.test.embed.EmbeddedApp;
 import static org.junit.Assert.*;

 import java.util.LinkedList;
 import java.util.Arrays;

 public class Example {
   public static class AddListToRequestRegistry implements Handler {
     public void handle(Context context) {
       context.getRequest().add(Types.listOf(String.class), new LinkedList&lt;String&gt;());
       context.next();
     }
   }

   public static class AddStringToList implements Handler {
     private final String string;
     public AddStringToList(String string) { this.string = string; }
     public void handle(Context ctx) {
       ctx.getRequest().get(Types.listOf(String.class)).add(string);
       ctx.next();
     }
   }

   public static void main(String... args) throws Exception {
     EmbeddedApp.of(s -&gt; s
       .registryOf(r -&gt; r
         .add(HandlerDecorator.prepend(new AddListToRequestRegistry()))
         .add(HandlerDecorator.prepend(new AddStringToList("foo")))
         .add(HandlerDecorator.prepend(new AddStringToList("bar")))
       )
       .handler(r -&gt;
         ctx -&gt; ctx.render(ctx.getRequest().get(Types.listOf(String.class)).toString())
       )
     ).test(httpClient -&gt;
       assertEquals(Arrays.asList("foo", "bar").toString(), httpClient.getText())
     );
   }
 }
 </code></pre>
 <p>
 Handler decorators can't do anything that handlers can't do.
 In the above example, the same result could have been achieved by just using the handler implementations.
 Decorators are usually more useful when using something like Guice and where it is desired for a module to contribute handlers.
 <pre class="java"><code>import ratpack.handling.Handler;
 import ratpack.handling.HandlerDecorator;
 import ratpack.handling.Context;
 import ratpack.registry.Registry;
 import ratpack.test.embed.EmbeddedApp;

 import ratpack.guice.Guice;
 import com.google.inject.AbstractModule;
 import com.google.inject.Inject;
 import com.google.inject.multibindings.Multibinder;

 import static org.junit.Assert.*;

 import java.util.LinkedList;
 import java.util.Arrays;

 public class Example {

   public static class MaintenanceWindow {
     public boolean active = true;
   }

   public static class HandlerDecoratorImpl implements HandlerDecorator {
     private final MaintenanceWindow maintenanceWindow;

     {@literal @}Inject
     public HandlerDecoratorImpl(MaintenanceWindow maintenanceWindow) {
       this.maintenanceWindow = maintenanceWindow;
     }

     public Handler decorate(Registry serverRegistry, Handler rest) {
       return ctx -&gt; {
         if (maintenanceWindow.active) {
           ctx.render("down for maintenance!");
         } else {
           ctx.insert(rest);
         }
       };
     }
   }

   public static class MaintenanceWindowModule extends AbstractModule {
     protected void configure() {
       bind(MaintenanceWindow.class);
       // Important to use a multi binding to allow other modules to also contribute handlers
       Multibinder.newSetBinder(binder(), HandlerDecorator.class).addBinding().to(HandlerDecoratorImpl.class);
     }
   }

   public static void main(String... args) throws Exception {
     EmbeddedApp.of(s -&gt; s
       .registry(Guice.registry(b -&gt; b
         .module(MaintenanceWindowModule.class)
       ))
       .handler(r -&gt;
         ctx -&gt; ctx.render("ok!")
       )
     ).test(httpClient -&gt; {
       assertEquals("down for maintenance!", httpClient.getText());
     });
   }
 }
 </code></pre>
 <p>
 Handler decorators are invoked in the <i>reverse</i> order in which they are defined in the server registry.
 That is, the reverse of the order that they were added to the server registry.
 This means that earlier decorators decorate the handlers returned by later decorators.
 Said another way, the handler returned by the <i>first</i> decorator returned from the server registry will be the first handler to handle requests.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#decorate-ratpack.registry.Registry-ratpack.handling.Handler-">decorate</a></span>(ratpack.registry.Registry&nbsp;serverRegistry,
        <a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&nbsp;rest)</code>
<div class="block">Creates a new handler that decorates the application handlers, given as the <code>rest</code> argument.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#noop--">noop</a></span>()</code>
<div class="block">A handler decorator implementation that does not decorate the handler.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#prepend-java.lang.Class-">prepend</a></span>(java.lang.Class&lt;? extends <a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&gt;&nbsp;handler)</code>
<div class="block">A factory for decorator impls that effectively inserts the given handler before the “rest” of the handlers.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#prepend-ratpack.handling.Handler-">prepend</a></span>(<a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&nbsp;handler)</code>
<div class="block">A factory for decorator impls that effectively inserts the given handler before the “rest” of the handlers.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#prependHandlers-ratpack.func.Action-">prependHandlers</a></span>(ratpack.func.Action&lt;? super <a href="../../ratpack/handling/Chain.html" title="interface in ratpack.handling">Chain</a>&gt;&nbsp;handlers)</code>
<div class="block">A factory for decorator impls that effectively inserts the given chain before the “rest” of the handlers.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static <a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/handling/HandlerDecorator.html#prependHandlers-java.lang.Class-">prependHandlers</a></span>(java.lang.Class&lt;? extends ratpack.func.Action&lt;? super <a href="../../ratpack/handling/Chain.html" title="interface in ratpack.handling">Chain</a>&gt;&gt;&nbsp;handlers)</code>
<div class="block">A factory for decorator impls that effectively inserts the given chain before the “rest” of the handlers.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="noop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noop</h4>
<pre>static&nbsp;<a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a>&nbsp;noop()</pre>
<div class="block">A handler decorator implementation that does not decorate the handler.

 That is, it just returns the given handler.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handler decorator that does not decorate the handler</dd>
</dl>
</li>
</ul>
<a name="decorate-ratpack.registry.Registry-ratpack.handling.Handler-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decorate</h4>
<pre><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&nbsp;decorate(ratpack.registry.Registry&nbsp;serverRegistry,
                 <a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&nbsp;rest)
          throws java.lang.Exception</pre>
<div class="block">Creates a new handler that decorates the application handlers, given as the <code>rest</code> argument.
 <p>
 As the <code>rest</code> argument encapsulates the application handlers, the returned handler should generally delegate to it (via <a href="../../ratpack/handling/Context.html#insert-ratpack.handling.Handler...-"><code>Context.insert(Handler...)</code></a>).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>serverRegistry</code> - the server registry</dd>
<dd><code>rest</code> - the rest of the handlers of the application</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new handler</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - any</dd>
</dl>
</li>
</ul>
<a name="prepend-ratpack.handling.Handler-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepend</h4>
<pre>static&nbsp;<a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a>&nbsp;prepend(<a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&nbsp;handler)</pre>
<div class="block">A factory for decorator impls that effectively inserts the given handler before the “rest” of the handlers.
 <p>
 The given handler should call <a href="../../ratpack/handling/Context.html#next--"><code>Context.next()</code></a> to delegate to the rest of the handlers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handler</code> - the handler to prependHandlers</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handler decorator implementation</dd>
</dl>
</li>
</ul>
<a name="prepend-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepend</h4>
<pre>static&nbsp;<a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a>&nbsp;prepend(java.lang.Class&lt;? extends <a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a>&gt;&nbsp;handler)</pre>
<div class="block">A factory for decorator impls that effectively inserts the given handler before the “rest” of the handlers.
 <p>
 This is useful for cases when a handler is installed from the registry outside of the
 usual <a href="../../ratpack/server/RatpackServerSpec.html#handlers-ratpack.func.Action-"><code>RatpackServerSpec.handlers(Action)</code></a>} method, e.g. from an external module.
 <p>
 The given handler should call <a href="../../ratpack/handling/Context.html#next--"><code>Context.next()</code></a> to delegate to the rest of the handlers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handler</code> - a class defining the handler</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handler decorator implementation</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="prependHandlers-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prependHandlers</h4>
<pre>static&nbsp;<a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a>&nbsp;prependHandlers(ratpack.func.Action&lt;? super <a href="../../ratpack/handling/Chain.html" title="interface in ratpack.handling">Chain</a>&gt;&nbsp;handlers)</pre>
<div class="block">A factory for decorator impls that effectively inserts the given chain before the “rest” of the handlers.
 The chain may define handlers that render results or call <a href="../../ratpack/handling/Context.html#next--"><code>Context.next()</code></a> to delegate to the
 rest of the handlers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handlers</code> - an action defining a handler chain</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handler decorator implementation</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="prependHandlers-java.lang.Class-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>prependHandlers</h4>
<pre>static&nbsp;<a href="../../ratpack/handling/HandlerDecorator.html" title="interface in ratpack.handling">HandlerDecorator</a>&nbsp;prependHandlers(java.lang.Class&lt;? extends ratpack.func.Action&lt;? super <a href="../../ratpack/handling/Chain.html" title="interface in ratpack.handling">Chain</a>&gt;&gt;&nbsp;handlers)</pre>
<div class="block">A factory for decorator impls that effectively inserts the given chain before the “rest” of the handlers.
 The chain may define handlers that render results or call <a href="../../ratpack/handling/Context.html#next--"><code>Context.next()</code></a> to delegate to the
 rest of the handlers.
 <p>
 This is useful for cases when a group of handlers is installed from the registry outside of the
 usual <a href="../../ratpack/server/RatpackServerSpec.html#handlers-ratpack.func.Action-"><code>RatpackServerSpec.handlers(Action)</code></a>} method, e.g. from an external module.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handlers</code> - a class defining an action for a handler chain</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handler decorator implementation</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/handling/Handlers.html" title="class in ratpack.handling"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/handling/HandlerDecorator.html" target="_top">Frames</a></li>
<li><a href="HandlerDecorator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
