<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:50:55 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Impositions (ratpack-core 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Impositions (ratpack-core 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":10,"i2":10,"i3":9,"i4":9,"i5":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/impose/Imposition.html" title="interface in ratpack.impose"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/impose/ImpositionsSpec.html" title="interface in ratpack.impose"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/impose/Impositions.html" target="_top">Frames</a></li>
<li><a href="Impositions.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.impose</div>
<h2 title="Class Impositions" class="title">Class Impositions</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ratpack.impose.Impositions</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">Impositions</span>
extends java.lang.Object</pre>
<div class="block">A mechanism for imposing things on an application from the outside and typically during testing.
 <p>
 The impositions mechanism exists primarily to facilitate convenient overriding of configuration and behaviour at test time.
 <code>ratpack.test.MainClassApplicationUnderTest</code> builds upon this mechanism.
 It uses the <a href="../../ratpack/impose/Impositions.html#impose-ratpack.impose.Impositions-ratpack.func.Factory-"><code>impose(Impositions, Factory)</code></a> to register impositions, while starting up the application under test within the given function.
 <p>
 Ratpack “components” are explicitly designed to be aware of impositions.
 Such components obtain the impositions either via the <a href="../../ratpack/impose/Impositions.html#current--"><code>current()</code></a> method, or via the server registry (e.g. Guice injection).
 User code does not typically need to be aware of impositions, as impositions are general used to influence upstream configuration.
 If you do need access to the impositions, prefer obtaining it from the server registry over <a href="../../ratpack/impose/Impositions.html#current--"><code>current()</code></a> as this method is thread sensitive.
 <p>
 Actual impositions are implemented as specific classes, known to the consumer.
 <a href="../../ratpack/impose/ForceServerListenPortImposition.html" title="class in ratpack.impose"><code>ForceServerListenPortImposition</code></a> and <a href="../../ratpack/impose/UserRegistryImposition.html" title="class in ratpack.impose"><code>UserRegistryImposition</code></a> are both examples of such.
 The consumers of these impositions simply obtain them from the impositions registry.
 <p>

 <pre class="java"><code>import ratpack.server.ServerConfig;
 import ratpack.impose.Impositions;
 import ratpack.impose.ServerConfigImposition;
 import ratpack.test.embed.EmbeddedApp;

 import static groovy.util.GroovyTestCase.assertEquals;
 import static java.util.Collections.singletonMap;

 public class Example {
   public static void main(String[] args) throws Exception {
     Impositions.of(i -&gt;
       i.add(ServerConfigImposition.of(s -&gt; s .props(singletonMap("foo", "imposed!"))))
     ).impose(() -&gt;
       EmbeddedApp.of(s -&gt; s
         .serverConfig(c -&gt; c
           .props(singletonMap("foo", "original"))
         )
         .handlers(c -&gt; c
           .get(ctx -&gt; ctx.render(ctx.get(ServerConfig.class).get("/foo", String.class)))
         )
       )
     ).test(testHttpClient -&gt;
       assertEquals("imposed!", testHttpClient.getText())
     );
   }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.2</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/impose/ServerConfigImposition.html" title="class in ratpack.impose"><code>ServerConfigImposition</code></a>, 
<a href="../../ratpack/impose/ForceServerListenPortImposition.html" title="class in ratpack.impose"><code>ForceServerListenPortImposition</code></a>, 
<a href="../../ratpack/impose/ForceDevelopmentImposition.html" title="class in ratpack.impose"><code>ForceDevelopmentImposition</code></a>, 
<a href="../../ratpack/impose/UserRegistryImposition.html" title="class in ratpack.impose"><code>UserRegistryImposition</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#current--">current</a></span>()</code>
<div class="block">The currently imposed impositions.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../ratpack/impose/Imposition.html" title="interface in ratpack.impose">Imposition</a>&gt;<br>java.util.Optional&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#get-java.lang.Class-">get</a></span>(java.lang.Class&lt;T&gt;&nbsp;type)</code>
<div class="block">Return an imposition of the given type, if one is currently imposed.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#impose-ratpack.func.Factory-">impose</a></span>(ratpack.func.Factory&lt;? extends T&gt;&nbsp;during)</code>
<div class="block">Delegates to <a href="../../ratpack/impose/Impositions.html#impose-ratpack.impose.Impositions-ratpack.func.Factory-"><code>impose(Impositions, Factory)</code></a>, with <code>this</code> as the impositions.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#impose-ratpack.impose.Impositions-ratpack.func.Factory-">impose</a></span>(<a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a>&nbsp;impositions,
      ratpack.func.Factory&lt;? extends T&gt;&nbsp;during)</code>
<div class="block">Sets impositions that will be available during execution of the given function, from this thread.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#none--">none</a></span>()</code>
<div class="block">An empty set of impositions.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static <a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/impose/Impositions.html#of-ratpack.func.Action-">of</a></span>(ratpack.func.Action&lt;? super <a href="../../ratpack/impose/ImpositionsSpec.html" title="interface in ratpack.impose">ImpositionsSpec</a>&gt;&nbsp;consumer)</code>
<div class="block">Creates an impositions instance of the given imposition objects.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="impose-ratpack.impose.Impositions-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>impose</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;impose(<a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a>&nbsp;impositions,
                           ratpack.func.Factory&lt;? extends T&gt;&nbsp;during)
                    throws java.lang.Exception</pre>
<div class="block">Sets impositions that will be available during execution of the given function, from this thread.
 <p>
 The given impositions will effectively be the value returned by <a href="../../ratpack/impose/Impositions.html#current--"><code>current()</code></a> during the given function,
 which is executed immediately.
 <p>
 The given impositions will only be returned from <a href="../../ratpack/impose/Impositions.html#current--"><code>current()</code></a> if called from the same thread that is calling this method.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of result of the given function</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>impositions</code> - the impositions to impose during the given function</dd>
<dd><code>during</code> - the function to execute while the impositions are imposed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of the given function</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - any thrown by <code>during</code></dd>
</dl>
</li>
</ul>
<a name="impose-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>impose</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;T&nbsp;impose(ratpack.func.Factory&lt;? extends T&gt;&nbsp;during)
             throws java.lang.Exception</pre>
<div class="block">Delegates to <a href="../../ratpack/impose/Impositions.html#impose-ratpack.impose.Impositions-ratpack.func.Factory-"><code>impose(Impositions, Factory)</code></a>, with <code>this</code> as the impositions.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of result of the given function</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>during</code> - the function to execute while the impositions are imposed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of the given function</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - any thrown by <code>during</code></dd>
</dl>
</li>
</ul>
<a name="current--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>current</h4>
<pre>public static&nbsp;<a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a>&nbsp;current()</pre>
<div class="block">The currently imposed impositions.
 <p>
 When called during a call to <a href="../../ratpack/impose/Impositions.html#impose-ratpack.impose.Impositions-ratpack.func.Factory-"><code>impose(Impositions, Factory)</code></a> from the same thread,
 returns an the impositions given to that method.
 <p>
 If no impositions have been imposed at call time, the returned impositions object is effectively empty.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the currently imposed impositions</dd>
</dl>
</li>
</ul>
<a name="none--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>none</h4>
<pre>public static&nbsp;<a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a>&nbsp;none()</pre>
<div class="block">An empty set of impositions.
 <p>
 Possibly useful during testing.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an empty set of impositions</dd>
</dl>
</li>
</ul>
<a name="of-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>of</h4>
<pre>public static&nbsp;<a href="../../ratpack/impose/Impositions.html" title="class in ratpack.impose">Impositions</a>&nbsp;of(ratpack.func.Action&lt;? super <a href="../../ratpack/impose/ImpositionsSpec.html" title="interface in ratpack.impose">ImpositionsSpec</a>&gt;&nbsp;consumer)
                      throws java.lang.Exception</pre>
<div class="block">Creates an impositions instance of the given imposition objects.
 <p>
 Possibly useful during testing.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an impositions instance of the given imposition objects</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="get-java.lang.Class-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;&lt;T extends <a href="../../ratpack/impose/Imposition.html" title="interface in ratpack.impose">Imposition</a>&gt;&nbsp;java.util.Optional&lt;T&gt;&nbsp;get(java.lang.Class&lt;T&gt;&nbsp;type)</pre>
<div class="block">Return an imposition of the given type, if one is currently imposed.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of imposition</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>type</code> - the type of imposition</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the impositions of the given type</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/impose/Imposition.html" title="interface in ratpack.impose"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/impose/ImpositionsSpec.html" title="interface in ratpack.impose"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/impose/Impositions.html" target="_top">Frames</a></li>
<li><a href="Impositions.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
