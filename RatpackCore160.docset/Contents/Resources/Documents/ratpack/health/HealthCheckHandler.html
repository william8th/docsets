<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:50:55 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>HealthCheckHandler (ratpack-core 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HealthCheckHandler (ratpack-core 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/health/HealthCheck.Result.html" title="class in ratpack.health"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/health/HealthCheckResults.html" title="class in ratpack.health"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/health/HealthCheckHandler.html" target="_top">Frames</a></li>
<li><a href="HealthCheckHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.health</div>
<h2 title="Class HealthCheckHandler" class="title">Class HealthCheckHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ratpack.health.HealthCheckHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">HealthCheckHandler</span>
extends java.lang.Object
implements <a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a></pre>
<div class="block">A handler that executes <a href="../../ratpack/health/HealthCheck.html" title="interface in ratpack.health"><code>health checks</code></a> and renders the results.
 <p>
 The handler obtains health checks via the context's registry.
 Typically, health checks are added to the server registry.
 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.registry.Registry;
 import ratpack.health.HealthCheck;
 import ratpack.health.HealthCheckHandler;
 import ratpack.test.embed.EmbeddedApp;

 import static org.junit.Assert.*;

 public class Example {

   static class ExampleHealthCheck implements HealthCheck {
     public String getName() {
       return "example"; // must be unique within the application
     }

     public Promise&lt;HealthCheck.Result&gt; check(Registry registry) throws Exception {
       return Promise.value(HealthCheck.Result.healthy());
     }
   }

   public static void main(String... args) throws Exception {
     EmbeddedApp.of(s -&gt; s
       .registryOf(r -&gt; r
         .add(new ExampleHealthCheck())
         .add(HealthCheck.of("inline", registry -&gt; // alternative way to implement health checks
           Promise.value(HealthCheck.Result.unhealthy("FAILED"))
         ))
       )
       .handlers(c -&gt; c
         .get("health/:name?", new HealthCheckHandler())
       )
     ).test(httpClient -&gt; {
       // Run all health checks
       String result = httpClient.getText("health");
       String[] results = result.split("\n");
       assertEquals(2, results.length);
       assertEquals("example : HEALTHY", results[0]);
       assertEquals("inline : UNHEALTHY [FAILED]", results[1]);

       // Run a single health check
       result = httpClient.getText("health/example");
       assertEquals("example : HEALTHY", result);
     });
   }
 }
 </code></pre>

 <h3>The output format</h3>
 <p>
 The handler creates a <a href="../../ratpack/health/HealthCheckResults.html" title="class in ratpack.health"><code>HealthCheckResults</code></a> object with the results of running the health checks and <a href="../../ratpack/handling/Context.html#render-java.lang.Object-"><code>renders</code></a> it.
 Ratpack provides a default renderer for <a href="../../ratpack/health/HealthCheckResults.html" title="class in ratpack.health"><code>HealthCheckResults</code></a> objects, that renders results as plain text one per line with the format:
 <pre><code> name : HEALTHY|UNHEALTHY [message] [exception]</code></pre>
 <p>If any result is unhealthy, a <code>503</code> status will be emitted, else <code>200</code>.</p>
 <p>
 To change the output format, simply add your own renderer for this type to the registry.

 <h3>Concurrency</h3>
 <p>
 The concurrency of the health check execution is managed by a <code>Throttle</code>.
 By default, an <code>unlimited throttle</code> is used.
 A sized throttle can be explicitly given to the constructor.

 <h3>Rendering single health checks</h3>
 <p>
 The handler checks for the presence of a <a href="../../ratpack/handling/Context.html#getPathTokens--"><code>path token</code></a> to indicate the name of an individual check to execute.
 By default, the token is named <a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN">"name"</a>.
 If a path token is present, but indicates the name of a non-existent health check, a <code>404</code> <a href="../../ratpack/handling/Context.html#clientError-int-"><code>client error</code></a> will be raised.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/health/HealthCheck.html" title="interface in ratpack.health"><code>HealthCheck</code></a>, 
<a href="../../ratpack/health/HealthCheckResults.html" title="class in ratpack.health"><code>HealthCheckResults</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN">DEFAULT_NAME_TOKEN</a></span></code>
<div class="block">The default path token name that indicates the individual health check to run.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler--">HealthCheckHandler</a></span>()</code>
<div class="block">Uses the default values of <a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN"><code>DEFAULT_NAME_TOKEN</code></a> and an unlimited throttle.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-">HealthCheckHandler</a></span>(java.lang.String&nbsp;pathTokenName)</code>
<div class="block">Uses an unlimited throttle and the given name for the health check identifying path token.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-">HealthCheckHandler</a></span>(java.lang.String&nbsp;pathTokenName,
                  ratpack.exec.Throttle&nbsp;throttle)</code>
<div class="block">Constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-ratpack.exec.Throttle-">HealthCheckHandler</a></span>(ratpack.exec.Throttle&nbsp;throttle)</code>
<div class="block">Uses the <a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN"><code>DEFAULT_NAME_TOKEN</code></a> and the given throttle.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#getName--">getName</a></span>()</code>
<div class="block">The name of the path token that may indicate a particular health check to execute.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>ratpack.exec.Throttle</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#getThrottle--">getThrottle</a></span>()</code>
<div class="block">The throttle for executing health checks.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/health/HealthCheckHandler.html#handle-ratpack.handling.Context-">handle</a></span>(<a href="../../ratpack/handling/Context.html" title="interface in ratpack.handling">Context</a>&nbsp;ctx)</code>
<div class="block">Renders health checks.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_NAME_TOKEN">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_NAME_TOKEN</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_NAME_TOKEN</pre>
<div class="block">The default path token name that indicates the individual health check to run.

 Value: "name"</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-"><code>HealthCheckHandler(String, Throttle)</code></a>, 
<a href="../../constant-values.html#ratpack.health.HealthCheckHandler.DEFAULT_NAME_TOKEN">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HealthCheckHandler--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HealthCheckHandler</h4>
<pre>public&nbsp;HealthCheckHandler()</pre>
<div class="block">Uses the default values of <a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN"><code>DEFAULT_NAME_TOKEN</code></a> and an unlimited throttle.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-"><code>HealthCheckHandler(String, Throttle)</code></a></dd>
</dl>
</li>
</ul>
<a name="HealthCheckHandler-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HealthCheckHandler</h4>
<pre>public&nbsp;HealthCheckHandler(java.lang.String&nbsp;pathTokenName)</pre>
<div class="block">Uses an unlimited throttle and the given name for the health check identifying path token.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathTokenName</code> - health check name</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-"><code>HealthCheckHandler(String, Throttle)</code></a></dd>
</dl>
</li>
</ul>
<a name="HealthCheckHandler-ratpack.exec.Throttle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HealthCheckHandler</h4>
<pre>public&nbsp;HealthCheckHandler(ratpack.exec.Throttle&nbsp;throttle)</pre>
<div class="block">Uses the <a href="../../ratpack/health/HealthCheckHandler.html#DEFAULT_NAME_TOKEN"><code>DEFAULT_NAME_TOKEN</code></a> and the given throttle.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>throttle</code> - the throttle for health check execution</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/health/HealthCheckHandler.html#HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-"><code>HealthCheckHandler(String, Throttle)</code></a></dd>
</dl>
</li>
</ul>
<a name="HealthCheckHandler-java.lang.String-ratpack.exec.Throttle-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HealthCheckHandler</h4>
<pre>protected&nbsp;HealthCheckHandler(java.lang.String&nbsp;pathTokenName,
                             ratpack.exec.Throttle&nbsp;throttle)</pre>
<div class="block">Constructor.
 <p>
 The path token name parameter specifies the name of the path token that, if present, indicates the single health check to execute.
 If this path token is not present, all checks will be run.
 <p>
 The throttle controls the concurrency of health check execution.
 The actual <i>parallelism</i> of the health check executions is ultimately determined by the size of the application event loop in conjunction with the throttle size.
 Generally, an <code>unlimited throttle</code> is appropriate unless there are many health checks that are executed frequently as this may degrade the performance of other requests.
 To serialize health check execution, use a throttle of size 1.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathTokenName</code> - the name of health check</dd>
<dd><code>throttle</code> - the throttle for health check execution</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getThrottle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThrottle</h4>
<pre>public&nbsp;ratpack.exec.Throttle&nbsp;getThrottle()</pre>
<div class="block">The throttle for executing health checks.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the throttle for executing health checks.</dd>
</dl>
</li>
</ul>
<a name="getName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block">The name of the path token that may indicate a particular health check to execute.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the name of the path token that may indicate a particular health check to execute</dd>
</dl>
</li>
</ul>
<a name="handle-ratpack.handling.Context-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>handle</h4>
<pre>public&nbsp;void&nbsp;handle(<a href="../../ratpack/handling/Context.html" title="interface in ratpack.handling">Context</a>&nbsp;ctx)
            throws java.lang.Exception</pre>
<div class="block">Renders health checks.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ratpack/handling/Handler.html#handle-ratpack.handling.Context-">handle</a></code>&nbsp;in interface&nbsp;<code><a href="../../ratpack/handling/Handler.html" title="interface in ratpack.handling">Handler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the request context</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if anything goes wrong (exception will be implicitly passed to the context's <a href="../../ratpack/handling/Context.html#error-java.lang.Throwable-"><code>Context.error(Throwable)</code></a> method)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/health/HealthCheck.Result.html" title="class in ratpack.health"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/health/HealthCheckResults.html" title="class in ratpack.health"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/health/HealthCheckHandler.html" target="_top">Frames</a></li>
<li><a href="HealthCheckHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
