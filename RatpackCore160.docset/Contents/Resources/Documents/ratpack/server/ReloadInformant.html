<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:50:54 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ReloadInformant (ratpack-core 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReloadInformant (ratpack-core 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/server/RatpackServerSpec.html" title="interface in ratpack.server"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/server/ServerConfig.html" title="interface in ratpack.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/server/ReloadInformant.html" target="_top">Frames</a></li>
<li><a href="ReloadInformant.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.server</div>
<h2 title="Interface ReloadInformant" class="title">Interface ReloadInformant</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">ReloadInformant</span></pre>
<div class="block">Informs when the server should be reloaded, during <a href="../../ratpack/server/ServerConfig.html#isDevelopment--"><code>development</code></a>.
 <p>
 During development mode, all reload informants present in the server registry will be asked if the server should reload before serving each request.
 The term “reload” here specifically refers to rebuilding the server definition by re-<i>executing</i> the function given to the <a href="../../ratpack/server/RatpackServer.html#of-ratpack.func.Action-"><code>RatpackServer.of(ratpack.func.Action)</code></a> method that defined the server.
 <p>
 Reload informants will never be queried concurrently so can be safely stateful.
 Calls to <a href="../../ratpack/server/ReloadInformant.html#shouldReload-ratpack.registry.Registry-"><code>shouldReload(ratpack.registry.Registry)</code></a> are serialised for any given informant, and informants are queried in sequence.
 <p>
 Reload informants are queried in the order they are returned by the server registry.
 If an informant indicates that the server should reload, no further informants will be queried.
 <p>
 As reload informants are queried for every request, it is sometimes desirable to internally use some kind of polling technique internally to avoid creating too much overhead.
 However, implementations do not need to be too performance sensitive as reload informants only apply during development.
 <p>
 Reload informants are never queried when not in development mode.
 It is completely benign for informants to be in the server registry when not in development.
 <p>
 Below shows a contrived reload informant that simply asks that the server reload on every other request.
 <pre class="java"><code>import ratpack.server.ReloadInformant;
 import ratpack.server.ServerConfig;
 import ratpack.test.embed.EmbeddedApp;
 import ratpack.registry.Registry;

 import static org.junit.Assert.assertEquals;

 public class Example {
   static class ReloadEveryOtherRequest implements ReloadInformant {
     private int i = 0;

     public boolean shouldReload(Registry registry) {
       return ++i % 2 == 0;
     }

     public String toString() {
       return "every other request informant";
     }
   }

   static int counter = 0;

   public static void main(String... args) throws Exception {
     EmbeddedApp.of(s -&gt; s
         .serverConfig(ServerConfig.embedded().development(true))
         .registryOf(r -&gt; r
             .add(ReloadInformant.class, new ReloadEveryOtherRequest())
             .add(Integer.class, Example.counter++)
         )
         .handler(r -&gt; ctx -&gt; ctx.render(ctx.get(Integer.class).toString()))
     ).test(httpClient -&gt; {
       assertEquals("0", httpClient.getText()); // first request never queries informants
       assertEquals("1", httpClient.getText()); // reload triggered
       assertEquals("1", httpClient.getText());
       assertEquals("2", httpClient.getText()); // reload triggered
       assertEquals("2", httpClient.getText());
     });
   }
 }
 </code></pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/server/ReloadInformant.html#shouldReload-ratpack.registry.Registry-">shouldReload</a></span>(ratpack.registry.Registry&nbsp;registry)</code>
<div class="block">Whether the server should reload.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/server/ReloadInformant.html#toString--">toString</a></span>()</code>
<div class="block">The description of this reload informant.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="shouldReload-ratpack.registry.Registry-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldReload</h4>
<pre>boolean&nbsp;shouldReload(ratpack.registry.Registry&nbsp;registry)</pre>
<div class="block">Whether the server should reload.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>registry</code> - the server registry</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether the server should reload</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>java.lang.String&nbsp;toString()</pre>
<div class="block">The description of this reload informant.
 <p>
 This value will be logged if the informant requests a reload, indicating which informant requested a reload.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the description of this reload informant</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/server/RatpackServerSpec.html" title="interface in ratpack.server"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/server/ServerConfig.html" title="interface in ratpack.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/server/ReloadInformant.html" target="_top">Frames</a></li>
<li><a href="ReloadInformant.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
