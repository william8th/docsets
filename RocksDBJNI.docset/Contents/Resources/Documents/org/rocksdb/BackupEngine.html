<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Tue Nov 27 00:05:50 MYT 2018 -->
<title>BackupEngine</title>
<meta name="date" content="2018-11-27">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BackupEngine";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../org/rocksdb/BackupableDBOptions.html" title="class in org.rocksdb"><span class="strong">Prev Class</span></a></li>
<li><a href="../../org/rocksdb/BackupInfo.html" title="class in org.rocksdb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/rocksdb/BackupEngine.html" target="_top">Frames</a></li>
<li><a href="BackupEngine.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.rocksdb.RocksObject">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.rocksdb</div>
<h2 title="Class BackupEngine" class="title">Class BackupEngine</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../org/rocksdb/AbstractNativeReference.html" title="class in org.rocksdb">org.rocksdb.AbstractNativeReference</a></li>
<li>
<ul class="inheritance">
<li><a href="../../org/rocksdb/AbstractImmutableNativeReference.html" title="class in org.rocksdb">org.rocksdb.AbstractImmutableNativeReference</a></li>
<li>
<ul class="inheritance">
<li><a href="../../org/rocksdb/RocksObject.html" title="class in org.rocksdb">org.rocksdb.RocksObject</a></li>
<li>
<ul class="inheritance">
<li>org.rocksdb.BackupEngine</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.AutoCloseable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BackupEngine</span>
extends <a href="../../org/rocksdb/RocksObject.html" title="class in org.rocksdb">RocksObject</a>
implements java.lang.AutoCloseable</pre>
<div class="block">BackupEngine allows you to backup
 and restore the database

 Be aware, that `new BackupEngine` takes time proportional to the amount
 of backups. So if you have a slow filesystem to backup (like HDFS)
 and you have a lot of backups then restoring can take some time.
 That's why we recommend to limit the number of backups.
 Also we recommend to keep BackupEngine alive and not to recreate it every
 time you need to do a backup.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.rocksdb.RocksObject">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.rocksdb.<a href="../../org/rocksdb/RocksObject.html" title="class in org.rocksdb">RocksObject</a></h3>
<code><a href="../../org/rocksdb/RocksObject.html#nativeHandle_">nativeHandle_</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#BackupEngine(long)">BackupEngine</a></strong>(long&nbsp;nativeHandle)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#createNewBackup(org.rocksdb.RocksDB)">createNewBackup</a></strong>(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db)</code>
<div class="block">Captures the state of the database in the latest backup

 Just a convenience for <a href="../../org/rocksdb/BackupEngine.html#createNewBackup(org.rocksdb.RocksDB,%20boolean)"><code>createNewBackup(RocksDB, boolean)</code></a> with
 the flushBeforeBackup parameter set to false</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#createNewBackup(org.rocksdb.RocksDB,%20boolean)">createNewBackup</a></strong>(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db,
               boolean&nbsp;flushBeforeBackup)</code>
<div class="block">Captures the state of the database in the latest backup</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#createNewBackupWithMetadata(org.rocksdb.RocksDB,%20java.lang.String,%20boolean)">createNewBackupWithMetadata</a></strong>(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db,
                           java.lang.String&nbsp;metadata,
                           boolean&nbsp;flushBeforeBackup)</code>
<div class="block">Captures the state of the database in the latest backup along with
 application specific metadata.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#deleteBackup(int)">deleteBackup</a></strong>(int&nbsp;backupId)</code>
<div class="block">Deletes a backup</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#disposeInternal(long)">disposeInternal</a></strong>(long&nbsp;handle)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#garbageCollect()">garbageCollect</a></strong>()</code>
<div class="block">Will delete all the files we don't need anymore.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../org/rocksdb/BackupInfo.html" title="class in org.rocksdb">BackupInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#getBackupInfo()">getBackupInfo</a></strong>()</code>
<div class="block">Gets information about the available
 backups</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#getCorruptedBackups()">getCorruptedBackups</a></strong>()</code>
<div class="block">Returns a list of corrupted backup ids.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../org/rocksdb/BackupEngine.html" title="class in org.rocksdb">BackupEngine</a></code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#open(org.rocksdb.Env,%20org.rocksdb.BackupableDBOptions)">open</a></strong>(<a href="../../org/rocksdb/Env.html" title="class in org.rocksdb">Env</a>&nbsp;env,
    <a href="../../org/rocksdb/BackupableDBOptions.html" title="class in org.rocksdb">BackupableDBOptions</a>&nbsp;options)</code>
<div class="block">Opens a new Backup Engine</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#purgeOldBackups(int)">purgeOldBackups</a></strong>(int&nbsp;numBackupsToKeep)</code>
<div class="block">Deletes old backups, keeping just the latest numBackupsToKeep</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#restoreDbFromBackup(int,%20java.lang.String,%20java.lang.String,%20org.rocksdb.RestoreOptions)">restoreDbFromBackup</a></strong>(int&nbsp;backupId,
                   java.lang.String&nbsp;dbDir,
                   java.lang.String&nbsp;walDir,
                   <a href="../../org/rocksdb/RestoreOptions.html" title="class in org.rocksdb">RestoreOptions</a>&nbsp;restoreOptions)</code>
<div class="block">Restore the database from a backup

 IMPORTANT: if options.share_table_files == true and you restore the DB
 from some backup that is not the latest, and you start creating new
 backups from the new DB, they will probably fail!

 Example: Let's say you have backups 1, 2, 3, 4, 5 and you restore 3.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/rocksdb/BackupEngine.html#restoreDbFromLatestBackup(java.lang.String,%20java.lang.String,%20org.rocksdb.RestoreOptions)">restoreDbFromLatestBackup</a></strong>(java.lang.String&nbsp;dbDir,
                         java.lang.String&nbsp;walDir,
                         <a href="../../org/rocksdb/RestoreOptions.html" title="class in org.rocksdb">RestoreOptions</a>&nbsp;restoreOptions)</code>
<div class="block">Restore the database from the latest backup</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.rocksdb.RocksObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.rocksdb.<a href="../../org/rocksdb/RocksObject.html" title="class in org.rocksdb">RocksObject</a></h3>
<code><a href="../../org/rocksdb/RocksObject.html#disposeInternal()">disposeInternal</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.rocksdb.AbstractImmutableNativeReference">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.rocksdb.<a href="../../org/rocksdb/AbstractImmutableNativeReference.html" title="class in org.rocksdb">AbstractImmutableNativeReference</a></h3>
<code><a href="../../org/rocksdb/AbstractImmutableNativeReference.html#close()">close</a>, <a href="../../org/rocksdb/AbstractImmutableNativeReference.html#disOwnNativeHandle()">disOwnNativeHandle</a>, <a href="../../org/rocksdb/AbstractImmutableNativeReference.html#isOwningHandle()">isOwningHandle</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.rocksdb.AbstractNativeReference">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.rocksdb.<a href="../../org/rocksdb/AbstractNativeReference.html" title="class in org.rocksdb">AbstractNativeReference</a></h3>
<code><a href="../../org/rocksdb/AbstractNativeReference.html#dispose()">dispose</a>, <a href="../../org/rocksdb/AbstractNativeReference.html#finalize()">finalize</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.AutoCloseable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.lang.AutoCloseable</h3>
<code>close</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BackupEngine(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BackupEngine</h4>
<pre>protected&nbsp;BackupEngine(long&nbsp;nativeHandle)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="open(org.rocksdb.Env, org.rocksdb.BackupableDBOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public static&nbsp;<a href="../../org/rocksdb/BackupEngine.html" title="class in org.rocksdb">BackupEngine</a>&nbsp;open(<a href="../../org/rocksdb/Env.html" title="class in org.rocksdb">Env</a>&nbsp;env,
                <a href="../../org/rocksdb/BackupableDBOptions.html" title="class in org.rocksdb">BackupableDBOptions</a>&nbsp;options)
                         throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Opens a new Backup Engine</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>env</code> - The environment that the backup engine should operate within</dd><dd><code>options</code> - Any options for the backup engine</dd>
<dt><span class="strong">Returns:</span></dt><dd>A new BackupEngine instance</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if the backup engine could not be opened</dd></dl>
</li>
</ul>
<a name="createNewBackup(org.rocksdb.RocksDB)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewBackup</h4>
<pre>public&nbsp;void&nbsp;createNewBackup(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db)
                     throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Captures the state of the database in the latest backup

 Just a convenience for <a href="../../org/rocksdb/BackupEngine.html#createNewBackup(org.rocksdb.RocksDB,%20boolean)"><code>createNewBackup(RocksDB, boolean)</code></a> with
 the flushBeforeBackup parameter set to false</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - The database to backup

 Note - This method is not thread safe</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if a new backup could not be created</dd></dl>
</li>
</ul>
<a name="createNewBackup(org.rocksdb.RocksDB, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewBackup</h4>
<pre>public&nbsp;void&nbsp;createNewBackup(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db,
                   boolean&nbsp;flushBeforeBackup)
                     throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Captures the state of the database in the latest backup</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - The database to backup</dd><dd><code>flushBeforeBackup</code> - When true, the Backup Engine will first issue a
                          memtable flush and only then copy the DB files to
                          the backup directory. Doing so will prevent log
                          files from being copied to the backup directory
                          (since flush will delete them).
                          When false, the Backup Engine will not issue a
                          flush before starting the backup. In that case,
                          the backup will also include log files
                          corresponding to live memtables. The backup will
                          always be consistent with the current state of the
                          database regardless of the flushBeforeBackup
                          parameter.

 Note - This method is not thread safe</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if a new backup could not be created</dd></dl>
</li>
</ul>
<a name="createNewBackupWithMetadata(org.rocksdb.RocksDB, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewBackupWithMetadata</h4>
<pre>public&nbsp;void&nbsp;createNewBackupWithMetadata(<a href="../../org/rocksdb/RocksDB.html" title="class in org.rocksdb">RocksDB</a>&nbsp;db,
                               java.lang.String&nbsp;metadata,
                               boolean&nbsp;flushBeforeBackup)
                                 throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Captures the state of the database in the latest backup along with
 application specific metadata.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - The database to backup</dd><dd><code>metadata</code> - Application metadata</dd><dd><code>flushBeforeBackup</code> - When true, the Backup Engine will first issue a
                          memtable flush and only then copy the DB files to
                          the backup directory. Doing so will prevent log
                          files from being copied to the backup directory
                          (since flush will delete them).
                          When false, the Backup Engine will not issue a
                          flush before starting the backup. In that case,
                          the backup will also include log files
                          corresponding to live memtables. The backup will
                          always be consistent with the current state of the
                          database regardless of the flushBeforeBackup
                          parameter.

 Note - This method is not thread safe</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if a new backup could not be created</dd></dl>
</li>
</ul>
<a name="getBackupInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBackupInfo</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../org/rocksdb/BackupInfo.html" title="class in org.rocksdb">BackupInfo</a>&gt;&nbsp;getBackupInfo()</pre>
<div class="block">Gets information about the available
 backups</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A list of information about each available backup</dd></dl>
</li>
</ul>
<a name="getCorruptedBackups()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptedBackups</h4>
<pre>public&nbsp;int[]&nbsp;getCorruptedBackups()</pre>
<div class="block"><p>Returns a list of corrupted backup ids. If there
 is no corrupted backup the method will return an
 empty list.</p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>array of backup ids as int ids.</dd></dl>
</li>
</ul>
<a name="garbageCollect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>garbageCollect</h4>
<pre>public&nbsp;void&nbsp;garbageCollect()
                    throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block"><p>Will delete all the files we don't need anymore. It will
 do the full scan of the files/ directory and delete all the
 files that are not referenced.</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if error happens in underlying
    native library.</dd></dl>
</li>
</ul>
<a name="purgeOldBackups(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOldBackups</h4>
<pre>public&nbsp;void&nbsp;purgeOldBackups(int&nbsp;numBackupsToKeep)
                     throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Deletes old backups, keeping just the latest numBackupsToKeep</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>numBackupsToKeep</code> - The latest n backups to keep</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if the old backups could not be deleted</dd></dl>
</li>
</ul>
<a name="deleteBackup(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteBackup</h4>
<pre>public&nbsp;void&nbsp;deleteBackup(int&nbsp;backupId)
                  throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Deletes a backup</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>backupId</code> - The id of the backup to delete</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if the backup could not be deleted</dd></dl>
</li>
</ul>
<a name="restoreDbFromBackup(int, java.lang.String, java.lang.String, org.rocksdb.RestoreOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreDbFromBackup</h4>
<pre>public&nbsp;void&nbsp;restoreDbFromBackup(int&nbsp;backupId,
                       java.lang.String&nbsp;dbDir,
                       java.lang.String&nbsp;walDir,
                       <a href="../../org/rocksdb/RestoreOptions.html" title="class in org.rocksdb">RestoreOptions</a>&nbsp;restoreOptions)
                         throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Restore the database from a backup

 IMPORTANT: if options.share_table_files == true and you restore the DB
 from some backup that is not the latest, and you start creating new
 backups from the new DB, they will probably fail!

 Example: Let's say you have backups 1, 2, 3, 4, 5 and you restore 3.
 If you add new data to the DB and try creating a new backup now, the
 database will diverge from backups 4 and 5 and the new backup will fail.
 If you want to create new backup, you will first have to delete backups 4
 and 5.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>backupId</code> - The id of the backup to restore</dd><dd><code>dbDir</code> - The directory to restore the backup to, i.e. where your
              database is</dd><dd><code>walDir</code> - The location of the log files for your database,
               often the same as dbDir</dd><dd><code>restoreOptions</code> - Options for controlling the restore</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if the database could not be restored</dd></dl>
</li>
</ul>
<a name="restoreDbFromLatestBackup(java.lang.String, java.lang.String, org.rocksdb.RestoreOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreDbFromLatestBackup</h4>
<pre>public&nbsp;void&nbsp;restoreDbFromLatestBackup(java.lang.String&nbsp;dbDir,
                             java.lang.String&nbsp;walDir,
                             <a href="../../org/rocksdb/RestoreOptions.html" title="class in org.rocksdb">RestoreOptions</a>&nbsp;restoreOptions)
                               throws <a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></pre>
<div class="block">Restore the database from the latest backup</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dbDir</code> - The directory to restore the backup to, i.e. where your
              database is</dd><dd><code>walDir</code> - The location of the log files for your database, often the
               same as dbDir</dd><dd><code>restoreOptions</code> - Options for controlling the restore</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../org/rocksdb/RocksDBException.html" title="class in org.rocksdb">RocksDBException</a></code> - thrown if the database could not be restored</dd></dl>
</li>
</ul>
<a name="disposeInternal(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>disposeInternal</h4>
<pre>protected final&nbsp;void&nbsp;disposeInternal(long&nbsp;handle)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../org/rocksdb/RocksObject.html#disposeInternal(long)">disposeInternal</a></code>&nbsp;in class&nbsp;<code><a href="../../org/rocksdb/RocksObject.html" title="class in org.rocksdb">RocksObject</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../org/rocksdb/BackupableDBOptions.html" title="class in org.rocksdb"><span class="strong">Prev Class</span></a></li>
<li><a href="../../org/rocksdb/BackupInfo.html" title="class in org.rocksdb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/rocksdb/BackupEngine.html" target="_top">Frames</a></li>
<li><a href="BackupEngine.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.rocksdb.RocksObject">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
