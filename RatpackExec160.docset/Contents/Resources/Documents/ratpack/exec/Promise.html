<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:53:54 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Promise (ratpack-exec 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Promise (ratpack-exec 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":18,"i2":17,"i3":18,"i4":18,"i5":18,"i6":18,"i7":18,"i8":18,"i9":18,"i10":18,"i11":6,"i12":18,"i13":18,"i14":17,"i15":18,"i16":18,"i17":18,"i18":18,"i19":18,"i20":18,"i21":18,"i22":18,"i23":18,"i24":17,"i25":18,"i26":18,"i27":18,"i28":18,"i29":18,"i30":18,"i31":18,"i32":18,"i33":18,"i34":18,"i35":18,"i36":50,"i37":18,"i38":18,"i39":49,"i40":49,"i41":17,"i42":18,"i43":18,"i44":18,"i45":18,"i46":18,"i47":18,"i48":18,"i49":18,"i50":18,"i51":18,"i52":18,"i53":18,"i54":18,"i55":18,"i56":17,"i57":6,"i58":18,"i59":18,"i60":18,"i61":18,"i62":18,"i63":18,"i64":17,"i65":6,"i66":17,"i67":18,"i68":49};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/exec/OverlappingExecutionException.html" title="class in ratpack.exec"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/exec/Promise.html" target="_top">Frames</a></li>
<li><a href="Promise.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.exec</div>
<h2 title="Interface Promise" class="title">Interface Promise&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">Promise&lt;T&gt;</span></pre>
<div class="block">A promise for a single value.
 <p>
 A promise is a representation of a value which will become available later.
 Methods such as <a href="../../ratpack/exec/Promise.html#map-ratpack.func.Function-"><code>map(Function)</code></a>, <a href="../../ratpack/exec/Promise.html#flatMap-ratpack.func.Function-"><code>flatMap(Function)</code></a>, <a href="../../ratpack/exec/Promise.html#cache--"><code>cache()</code></a> etc.) allow a pipeline of “operations” to be specified,
 that the value will travel through as it becomes available.
 Such operations are implemented via the <a href="../../ratpack/exec/Promise.html#transform-ratpack.func.Function-"><code>transform(Function)</code></a> method.
 Each operation returns a new promise object, not the original promise object.
 <p>
 To create a promise, use the <a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a> method (or one of the variants such as <a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>.
 To test code that uses promises, use the <code>ratpack.test.exec.ExecHarness</code>.
 <p>
 The promise is not “activated” until the <a href="../../ratpack/exec/Promise.html#then-ratpack.func.Action-"><code>then(Action)</code></a> method is called.
 This method terminates the pipeline, and receives the final value.
 <p>
 Promise objects are multi use.
 Every promise pipeline has a value producing function at its start.
 Activating a promise (i.e. calling <a href="../../ratpack/exec/Promise.html#then-ratpack.func.Action-"><code>then(Action)</code></a>) invokes the function.
 The <a href="../../ratpack/exec/Promise.html#cache--"><code>cache()</code></a> operation can be used to change this behaviour.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#apply-ratpack.func.Function-">apply</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;function)</code>
<div class="block">Applies the custom operation function to this promise.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default &lt;B,A&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;A&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#around-ratpack.func.Factory-ratpack.func.BiFunction-">around</a></span>(ratpack.func.Factory&lt;? extends B&gt;&nbsp;before,
      <a href="../../ratpack/func/BiFunction.html" title="interface in ratpack.func">BiFunction</a>&lt;? super B,? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;A&gt;&gt;&nbsp;after)</code>
<div class="block">Facilitates capturing a value before the the promise is subscribed and using it to later augment the result.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-">async</a></span>(<a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;T&gt;&nbsp;upstream)</code>
<div class="block">Creates a promise for value that will be produced asynchronously.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#blockingMap-ratpack.func.Function-">blockingMap</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;transformer)</code>
<div class="block">Like <a href="../../ratpack/exec/Promise.html#map-ratpack.func.Function-"><code>map(Function)</code></a>, but performs the transformation on a blocking thread.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#blockingOp-ratpack.func.Action-">blockingOp</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</code>
<div class="block">Executes the given action with the promise value, on a blocking thread.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#cache--">cache</a></span>()</code>
<div class="block">Caches the promised value (or error) and returns it to all subscribers.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#cacheIf-ratpack.func.Predicate-">cacheIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;shouldCache)</code>
<div class="block">Caches the promise value and provides it to all future subscribers, if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#cacheResultFor-ratpack.func.Function-">cacheResultFor</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,java.time.Duration&gt;&nbsp;cacheFor)</code>
<div class="block">Caches the promise result for a calculated amount of time.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-">cacheResultIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;shouldCache)</code>
<div class="block">Caches the promise result eternally and provide it to all future subscribers, if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#close-java.lang.AutoCloseable-">close</a></span>(java.lang.AutoCloseable&nbsp;closeable)</code>
<div class="block">Closes the given closeable when the value or error propagates to this point.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#close-ratpack.exec.Operation-">close</a></span>(<a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;closer)</code>
<div class="block">Like <a href="../../ratpack/exec/Promise.html#close-java.lang.AutoCloseable-"><code>close(AutoCloseable)</code></a>, but allows async close operations.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#connect-ratpack.exec.Downstream-">connect</a></span>(<a href="../../ratpack/exec/Downstream.html" title="interface in ratpack.exec">Downstream</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;downstream)</code>
<div class="block">A low level hook for consuming the promised value.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#defer-ratpack.func.Action-">defer</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Runnable&gt;&nbsp;releaser)</code>
<div class="block">Defers the subscription of <code>this</code> promise until later.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#defer-java.time.Duration-">defer</a></span>(java.time.Duration&nbsp;duration)</code>
<div class="block">Defers the subscription of <code>this</code> promise for the given duration.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#error-java.lang.Throwable-">error</a></span>(java.lang.Throwable&nbsp;t)</code>
<div class="block">Creates a failed promise with the given error.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatLeft-ratpack.func.Function-">flatLeft</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;leftFunction)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the result of the given function as the <code>left</code>.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMap-ratpack.func.Function-">flatMap</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;transformer)</code>
<div class="block">Transforms the promised value by applying the given function to it that returns a promise for the transformed value.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>default &lt;E extends java.lang.Throwable&gt;<br><a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMapError-java.lang.Class-ratpack.func.Function-">flatMapError</a></span>(java.lang.Class&lt;E&gt;&nbsp;type,
            <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super E,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</code>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMapError-ratpack.func.Function-">flatMapError</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</code>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMapError-ratpack.func.Predicate-ratpack.func.Function-">flatMapError</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
            <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</code>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMapIf-ratpack.func.Predicate-ratpack.func.Function-ratpack.func.Function-">flatMapIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
         <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;onTrue,
         <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;onFalse)</code>
<div class="block">Transforms the promised value by applying one of the given functions to it that returns a promise for the transformed value, depending if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatMapIf-ratpack.func.Predicate-ratpack.func.Function-">flatMapIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
         <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;transformer)</code>
<div class="block">Transforms the promised value by applying the given function to it that returns a promise for the transformed value, if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatOp-ratpack.func.Function-">flatOp</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</code>
<div class="block">Converts this promise to an operation, which is the return of <code>function</code>.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatRight-ratpack.func.Function-">flatRight</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;rightFunction)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the result of the given function as the <code>right</code>.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#flatten-ratpack.func.Factory-">flatten</a></span>(ratpack.func.Factory&lt;? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&gt;&nbsp;factory)</code>
<div class="block">Creates a promise for the promise produced by the given factory.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#fork--">fork</a></span>()</code>
<div class="block">Forks a new execution and subscribes to this promise, returning a promise for its value.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#fork-ratpack.func.Action-">fork</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/ExecSpec.html" title="interface in ratpack.exec">ExecSpec</a>&gt;&nbsp;execSpec)</code>
<div class="block">Forks a new execution and subscribes to this promise, returning a promise for its value.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#left-ratpack.func.Function-">left</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;leftFunction)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the result of the given function as the <code>left</code>.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#left-ratpack.exec.Promise-">left</a></span>(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;left)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the given promise as the <code>left</code>.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#map-ratpack.func.Function-">map</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;transformer)</code>
<div class="block">Transforms the promised value by applying the given function to it.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>default &lt;E extends java.lang.Throwable&gt;<br><a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#mapError-java.lang.Class-ratpack.func.Function-">mapError</a></span>(java.lang.Class&lt;E&gt;&nbsp;type,
        <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super E,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;function)</code>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Function-">mapError</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;transformer)</code>
<div class="block">Transforms the promise failure (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Predicate-ratpack.func.Function-">mapError</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
        <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;function)</code>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#mapIf-ratpack.func.Predicate-ratpack.func.Function-ratpack.func.Function-">mapIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
     <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;onTrue,
     <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;onFalse)</code>
<div class="block">Transforms the promised value by applying one of the given functions to it, depending if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#mapIf-ratpack.func.Predicate-ratpack.func.Function-">mapIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
     <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;transformer)</code>
<div class="block">Transforms the promised value by applying the given function to it, if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#next-ratpack.func.Action-">next</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</code>
<div class="block">Executes the provided, potentially asynchronous, <a href="../../ratpack/func/Action.html" title="interface in ratpack.func"><code>Action</code></a> with the promised value as input.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#next-ratpack.exec.Promise-">next</a></span>(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;next)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#replace-ratpack.exec.Promise-"><code>replace(Promise)</code></a> as of 1.1.0</span></div>
</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#nextOp-ratpack.func.Function-">nextOp</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</code>
<div class="block">Executes the operation returned by the given function.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#nextOpIf-ratpack.func.Predicate-ratpack.func.Function-">nextOpIf</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
        <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</code>
<div class="block">Executes the operation returned by the given function, if it satisfies the predicate.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#of-ratpack.exec.Upstream-">of</a></span>(<a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;T&gt;&nbsp;upstream)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a></span></div>
</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#ofLazy-ratpack.func.Factory-">ofLazy</a></span>(ratpack.func.Factory&lt;T&gt;&nbsp;factory)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>}</span></div>
</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#ofNull--">ofNull</a></span>()</code>
<div class="block">A promise for <code>null</code>.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#onError-ratpack.func.Action-">onError</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Throwable&gt;&nbsp;errorHandler)</code>
<div class="block">Specifies the action to take if the an error occurs trying to produce the promised value.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>default &lt;E extends java.lang.Throwable&gt;<br><a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#onError-java.lang.Class-ratpack.func.Action-">onError</a></span>(java.lang.Class&lt;E&gt;&nbsp;errorType,
       <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super E&gt;&nbsp;errorHandler)</code>
<div class="block">Specifies the action to take if the an error of the given type occurs trying to produce the promised value.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#onError-ratpack.func.Predicate-ratpack.func.Action-">onError</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
       <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Throwable&gt;&nbsp;errorHandler)</code>
<div class="block">Specifies the action to take if the an error occurs trying to produce the promised value, that the given predicate applies to.</div>
</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#onNull-ratpack.func.Block-">onNull</a></span>(<a href="../../ratpack/func/Block.html" title="interface in ratpack.func">Block</a>&nbsp;action)</code>
<div class="block">A convenience shorthand for <a href="../../ratpack/exec/Promise.html#route-ratpack.func.Predicate-ratpack.func.Action-"><code>routing</code></a> <code>null</code> values.</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#onYield-java.lang.Runnable-">onYield</a></span>(java.lang.Runnable&nbsp;onYield)</code>
<div class="block">Registers a listener that is invoked when <code>this</code> promise is initiated.</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#operation--">operation</a></span>()</code>
<div class="block">Converts this promise to an operation, by effectively discarding the result.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#operation-ratpack.func.Action-">operation</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</code>
<div class="block">Converts this promise to an operation which is effectively <code>action</code>.</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#replace-ratpack.exec.Promise-">replace</a></span>(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;next)</code>
<div class="block">Replaces <code>this</code> promise with the provided promise for downstream subscribers.</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#result-ratpack.func.Action-">result</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;resultHandler)</code>
<div class="block">Consume the promised value as a <a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec"><code>Result</code></a>.</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#retry-int-ratpack.func.BiFunction-">retry</a></span>(int&nbsp;maxAttempts,
     <a href="../../ratpack/func/BiFunction.html" title="interface in ratpack.func">BiFunction</a>&lt;? super java.lang.Integer,? super java.lang.Throwable,<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.time.Duration&gt;&gt;&nbsp;onError)</code>
<div class="block">Causes <code>this</code> yielding the promised value to be retried on error, after a calculated delay.</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#retry-int-java.time.Duration-ratpack.func.BiAction-">retry</a></span>(int&nbsp;maxAttempts,
     java.time.Duration&nbsp;delay,
     <a href="../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super java.lang.Integer,? super java.lang.Throwable&gt;&nbsp;onError)</code>
<div class="block">Causes <code>this</code> yielding the promised value to be retried on error, after a fixed delay.</div>
</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#right-ratpack.func.Function-">right</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;rightFunction)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the result of the given function as the <code>right</code>.</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#right-ratpack.exec.Promise-">right</a></span>(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;right)</code>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the given promise as the <code>right</code>.</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#route-ratpack.func.Predicate-ratpack.func.Action-">route</a></span>(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
     <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</code>
<div class="block">Allows the promised value to be handled specially if it meets the given predicate, instead of being handled by the promise subscriber.</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-">sync</a></span>(ratpack.func.Factory&lt;T&gt;&nbsp;factory)</code>
<div class="block">Creates a promise for the value synchronously produced by the given factory.</div>
</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#then-ratpack.func.Action-">then</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;then)</code>
<div class="block">Specifies what should be done with the promised object when it becomes available.</div>
</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#throttled-ratpack.exec.Throttle-">throttled</a></span>(<a href="../../ratpack/exec/Throttle.html" title="interface in ratpack.exec">Throttle</a>&nbsp;throttle)</code>
<div class="block">Throttles <code>this</code> promise, using the given <a href="../../ratpack/exec/Throttle.html" title="interface in ratpack.exec"><code>throttle</code></a>.</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#time-ratpack.func.Action-">time</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.time.Duration&gt;&nbsp;action)</code>
<div class="block">Emits the time taken from when the promise is subscribed to to when the result is available.</div>
</td>
</tr>
<tr id="i60" class="altColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,java.time.Duration&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#timeResult--">timeResult</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i61" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#timeResult-ratpack.func.BiAction-">timeResult</a></span>(<a href="../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? super java.time.Duration&gt;&nbsp;action)</code>
<div class="block">Emits the time taken from when the promise is subscribed to to when the result is available.</div>
</td>
</tr>
<tr id="i62" class="altColor">
<td class="colFirst"><code>default &lt;O&gt;&nbsp;O</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#to-ratpack.func.Function-">to</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends O&gt;&nbsp;function)</code>
<div class="block">Applies the given function to <code>this</code> and returns the result.</div>
</td>
</tr>
<tr id="i63" class="rowColor">
<td class="colFirst"><code>default java.util.concurrent.CompletableFuture&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#toCompletableFuture--">toCompletableFuture</a></span>()</code>
<div class="block">Convert this promise into a <code>CompletableFuture</code>.</div>
</td>
</tr>
<tr id="i64" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#toPromise-java.util.concurrent.CompletableFuture-">toPromise</a></span>(java.util.concurrent.CompletableFuture&lt;T&gt;&nbsp;future)</code>
<div class="block">Convert a <code>CompletableFuture</code> into a promise.</div>
</td>
</tr>
<tr id="i65" class="rowColor">
<td class="colFirst"><code>&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#transform-ratpack.func.Function-">transform</a></span>(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;O&gt;&gt;&nbsp;upstreamTransformer)</code>
<div class="block">Apply a custom transform to this promise.</div>
</td>
</tr>
<tr id="i66" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#value-T-">value</a></span>(T&nbsp;t)</code>
<div class="block">Creates a promise for the given item.</div>
</td>
</tr>
<tr id="i67" class="rowColor">
<td class="colFirst"><code>default <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#wiretap-ratpack.func.Action-">wiretap</a></span>(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec">Result</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;listener)</code>
<div class="block">Registers a listener for the promise outcome.</div>
</td>
</tr>
<tr id="i68" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ratpack/exec/Promise.html#wrap-ratpack.func.Factory-">wrap</a></span>(ratpack.func.Factory&lt;? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&gt;&nbsp;factory)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">since 1.5, replaced by <a href="../../ratpack/exec/Promise.html#flatten-ratpack.func.Factory-"><code>flatten(Factory)</code></a>.</span></div>
</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="async-ratpack.exec.Upstream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>async</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;async(<a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;T&gt;&nbsp;upstream)</pre>
<div class="block">Creates a promise for value that will be produced asynchronously.
 <p>
 The <a href="../../ratpack/exec/Upstream.html#connect-ratpack.exec.Downstream-"><code>Upstream.connect(Downstream)</code></a> method of the given upstream will be invoked every time the value is requested.
 This method should propagate the value (or error) to the given downstream object when it is available.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String[] args) throws Exception {
     String value = ExecHarness.yieldSingle(e -&gt;
       Promise.&lt;String&gt;async(down -&gt;
         new Thread(() -&gt; {
           down.success("foo");
         }).start()
       )
     ).getValueOrThrow();

     assertEquals(value, "foo");
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>upstream</code> - the producer of the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the asynchronously created value</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec"><code>Upstream</code></a>, 
<a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>, 
<a href="../../ratpack/exec/Promise.html#value-T-"><code>value(Object)</code></a>, 
<a href="../../ratpack/exec/Promise.html#error-java.lang.Throwable-"><code>error(Throwable)</code></a></dd>
</dl>
</li>
</ul>
<a name="sync-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;sync(ratpack.func.Factory&lt;T&gt;&nbsp;factory)</pre>
<div class="block">Creates a promise for the value synchronously produced by the given factory.
 <p>
 The given factory will be invoked every time that the value is requested.
 If the factory throws an exception, the promise will convey that exception.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String[] args) throws Exception {
     String value = ExecHarness.yieldSingle(e -&gt;
       Promise.sync(() -&gt; "foo")
     ).getValueOrThrow();

     assertEquals(value, "foo");
   }
 }
 </code></pre>

 <p>
 This method is often used to when a method needs to return a promise, but can produce its value synchronously.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>factory</code> - the producer of the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the result of the factory</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a>, 
<a href="../../ratpack/exec/Promise.html#value-T-"><code>value(Object)</code></a>, 
<a href="../../ratpack/exec/Promise.html#error-java.lang.Throwable-"><code>error(Throwable)</code></a></dd>
</dl>
</li>
</ul>
<a name="flatten-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatten</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;flatten(ratpack.func.Factory&lt;? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&gt;&nbsp;factory)</pre>
<div class="block">Creates a promise for the promise produced by the given factory.
 <p>
 The given factory will be invoked every time that the value is requested.
 If the factory throws an exception, the promise will convey that exception.
 <p>
 This can be used to effectively prepend work to another promise.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>factory</code> - the producer of the promise to return</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the result of the factory</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="wrap-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrap</h4>
<pre>@Deprecated
static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;wrap(ratpack.func.Factory&lt;? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&gt;&nbsp;factory)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">since 1.5, replaced by <a href="../../ratpack/exec/Promise.html#flatten-ratpack.func.Factory-"><code>flatten(Factory)</code></a>.</span></div>
<div class="block">Deprecated. Use <a href="../../ratpack/exec/Promise.html#flatten-ratpack.func.Factory-"><code>flatten(Factory)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>factory</code> - deprecated.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>deprecated.</dd>
</dl>
</li>
</ul>
<a name="value-java.lang.Object-">
<!--   -->
</a><a name="value-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>value</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;value(T&nbsp;t)</pre>
<div class="block">Creates a promise for the given item.
 <p>
 The given item will be used every time that the value is requested.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String[] args) throws Exception {
     String value = ExecHarness.yieldSingle(e -&gt;
       Promise.value("foo")
     ).getValueOrThrow();

     assertEquals(value, "foo");
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the given item</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a>, 
<a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>, 
<a href="../../ratpack/exec/Promise.html#error-java.lang.Throwable-"><code>error(Throwable)</code></a></dd>
</dl>
</li>
</ul>
<a name="ofNull--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ofNull</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;ofNull()</pre>
<div class="block">A promise for <code>null</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for <code>null</code>.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="error-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>error</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;error(java.lang.Throwable&nbsp;t)</pre>
<div class="block">Creates a failed promise with the given error.
 <p>
 The given error will be used every time that the value is requested.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertSame;

 public class Example {
   public static void main(String[] args) throws Exception {
     Exception exception = new Exception();
     Throwable error = ExecHarness.yieldSingle(e -&gt;
       Promise.error(exception)
     ).getThrowable();

     assertSame(exception, error);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - the error</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a failed promise</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a>, 
<a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>, 
<a href="../../ratpack/exec/Promise.html#value-T-"><code>value(Object)</code></a></dd>
</dl>
</li>
</ul>
<a name="of-ratpack.exec.Upstream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>of</h4>
<pre>@Deprecated
static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;of(<a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;T&gt;&nbsp;upstream)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#async-ratpack.exec.Upstream-"><code>async(Upstream)</code></a></span></div>
<div class="block">Deprecated.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>upstream</code> - the producer of the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the asynchronously created value</dd>
</dl>
</li>
</ul>
<a name="ofLazy-ratpack.func.Factory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ofLazy</h4>
<pre>@Deprecated
static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;ofLazy(ratpack.func.Factory&lt;T&gt;&nbsp;factory)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#sync-ratpack.func.Factory-"><code>sync(Factory)</code></a>}</span></div>
<div class="block">Deprecated.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>factory</code> - the producer of the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the result of the factory</dd>
</dl>
</li>
</ul>
<a name="then-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>then</h4>
<pre>void&nbsp;then(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;then)</pre>
<div class="block">Specifies what should be done with the promised object when it becomes available.
 <p>
 <b>Important:</b> this method can only be used from a Ratpack managed compute thread.
 If it is called on a non Ratpack managed compute thread it will immediately throw an <a href="../../ratpack/exec/ExecutionException.html" title="class in ratpack.exec"><code>ExecutionException</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>then</code> - the receiver of the promised value</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ratpack/exec/ExecutionException.html" title="class in ratpack.exec">ExecutionException</a></code> - if not called on a Ratpack managed compute thread</dd>
</dl>
</li>
</ul>
<a name="connect-ratpack.exec.Downstream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre>void&nbsp;connect(<a href="../../ratpack/exec/Downstream.html" title="interface in ratpack.exec">Downstream</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;downstream)</pre>
<div class="block">A low level hook for consuming the promised value.
 <p>
 It is generally preferable to use <a href="../../ratpack/exec/Promise.html#then-ratpack.func.Action-"><code>then(Action)</code></a> over this method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>downstream</code> - the downstream consumer</dd>
</dl>
</li>
</ul>
<a name="transform-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transform</h4>
<pre>&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;transform(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/Upstream.html" title="interface in ratpack.exec">Upstream</a>&lt;O&gt;&gt;&nbsp;upstreamTransformer)</pre>
<div class="block">Apply a custom transform to this promise.
 <p>
 This method is the basis for the standard operations of this interface, such as <a href="../../ratpack/exec/Promise.html#map-ratpack.func.Function-"><code>map(Function)</code></a>.
 The following is a non generic implementation of a map that converts the value to upper case.
 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
       Promise.value("foo")
         .transform(up -&gt; down -&gt;
           up.connect(down.&lt;String&gt;onSuccess(value -&gt; {
             try {
               down.success(value.toUpperCase());
             } catch (Throwable e) {
               down.error(e);
             }
           }))
         )
     );

     assertEquals("FOO", result.getValue());
   }
 }
 </code></pre>
 <p>
 The “upstreamTransformer” function takes an upstream data source, and returns another upstream that wraps it.
 It is typical for the returned upstream to invoke the <a href="../../ratpack/exec/Upstream.html#connect-ratpack.exec.Downstream-"><code>Upstream.connect(Downstream)</code></a> method of the given upstream during its connect method.
 <p>
 For more examples of transform implementations, please see the implementations of the methods of this interface.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of item emitted by the transformed upstream</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>upstreamTransformer</code> - a function that returns a new upstream, typically wrapping the given upstream argument</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new promise</dd>
</dl>
</li>
</ul>
<a name="onError-ratpack.func.Predicate-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;onError(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
                           <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Throwable&gt;&nbsp;errorHandler)</pre>
<div class="block">Specifies the action to take if the an error occurs trying to produce the promised value, that the given predicate applies to.
 <p>
 If the given action throws an exception, the original exception will be rethrown with the exception thrown
 by the action added to the suppressed exceptions list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the predicate to test against the error</dd>
<dd><code>errorHandler</code> - the action to take if an error occurs</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A promise for the successful result</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1</dd>
</dl>
</li>
</ul>
<a name="onError-java.lang.Class-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre>default&nbsp;&lt;E extends java.lang.Throwable&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;onError(java.lang.Class&lt;E&gt;&nbsp;errorType,
                                                           <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super E&gt;&nbsp;errorHandler)</pre>
<div class="block">Specifies the action to take if the an error of the given type occurs trying to produce the promised value.

 <pre class="java"><code>import ratpack.http.TypedData;
 import ratpack.test.embed.EmbeddedApp;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     EmbeddedApp.fromHandler(ctx -&gt;
         ctx.getRequest().getBody()
           .map(TypedData::getText)
           .map(t -&gt; {
             if (t.equals("1")) {
               throw new IllegalArgumentException("validation error!");
             } else {
               throw new RuntimeException("some other error!");
             }
           })
           .onError(IllegalArgumentException.class, e -&gt; ctx.render("the value is invalid"))
           .onError(e -&gt; ctx.render("unknown error: " + e.getMessage()))
           .then(t -&gt; ctx.render("ok"))
     ).test(httpClient -&gt; {
       assertEquals(httpClient.requestSpec(r -&gt; r.getBody().text("0")).postText(), "unknown error: some other error!");
       assertEquals(httpClient.requestSpec(r -&gt; r.getBody().text("1")).postText(), "the value is invalid");
     });
   }
 }
 </code></pre>
 <p>
 If the given action throws an exception, the original exception will be rethrown with the exception thrown
 by the action added to the suppressed exceptions list.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>E</code> - the type of exception to handle with the given action</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>errorType</code> - the type of exception to handle with the given action</dd>
<dd><code>errorHandler</code> - the action to take if an error occurs</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A promise for the successful result</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1</dd>
</dl>
</li>
</ul>
<a name="onError-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;onError(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Throwable&gt;&nbsp;errorHandler)</pre>
<div class="block">Specifies the action to take if the an error occurs trying to produce the promised value.
 <p>
 If the given action throws an exception, the original exception will be rethrown with the exception thrown
 by the action added to the suppressed exceptions list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>errorHandler</code> - the action to take if an error occurs</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A promise for the successful result</dd>
</dl>
</li>
</ul>
<a name="result-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>result</h4>
<pre>default&nbsp;void&nbsp;result(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;resultHandler)</pre>
<div class="block">Consume the promised value as a <a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec"><code>Result</code></a>.
 <p>
 This method is an alternative to <a href="../../ratpack/exec/Promise.html#then-ratpack.func.Action-"><code>then(Action)</code></a> and <a href="../../ratpack/exec/Promise.html#onError-ratpack.func.Action-"><code>onError(Action)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resultHandler</code> - the consumer of the result</dd>
</dl>
</li>
</ul>
<a name="map-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>map</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;map(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;transformer)</pre>
<div class="block">Transforms the promised value by applying the given function to it.
 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .map(String::toUpperCase)
           .map(s -&gt; s + "-BAR")
     );

     assertEquals("FOO-BAR", result.getValue());
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the transformed object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transformer</code> - the transformation to apply to the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the transformed value</dd>
</dl>
</li>
</ul>
<a name="mapIf-ratpack.func.Predicate-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapIf</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;mapIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                         <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;transformer)</pre>
<div class="block">Transforms the promised value by applying the given function to it, if it satisfies the predicate.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .mapIf(s -&gt; s.contains("f"), String::toUpperCase)
           .mapIf(s -&gt; s.contains("f"), s -&gt; s + "-BAR")
     );

     assertEquals("FOO", result.getValue());
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition to satisfy in order to be transformed</dd>
<dd><code>transformer</code> - the transformation to apply to the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="mapIf-ratpack.func.Predicate-ratpack.func.Function-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapIf</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;mapIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                             <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;onTrue,
                             <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;onFalse)</pre>
<div class="block">Transforms the promised value by applying one of the given functions to it, depending if it satisfies the predicate.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .mapIf(s -&gt; s.contains("f"), String::toUpperCase, s -&gt; s)
           .mapIf(s -&gt; s.contains("f"), s -&gt; s, s -&gt; s + "-BAR")
     );

     assertEquals("FOO-BAR", result.getValue());
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the transformed object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition to decide which transformation to apply</dd>
<dd><code>onTrue</code> - the transformation to apply when the predicate is true</dd>
<dd><code>onFalse</code> - the transformation to apply when the predicate is false</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="blockingMap-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockingMap</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;blockingMap(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;transformer)</pre>
<div class="block">Like <a href="../../ratpack/exec/Promise.html#map-ratpack.func.Function-"><code>map(Function)</code></a>, but performs the transformation on a blocking thread.
 <p>
 This is simply a more convenient form of using <a href="../../ratpack/exec/Blocking.html#get-ratpack.func.Factory-"><code>Blocking.get(Factory)</code></a> and <a href="../../ratpack/exec/Promise.html#flatMap-ratpack.func.Function-"><code>flatMap(Function)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the transformed object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transformer</code> - the transformation to apply to the promised value, on a blocking thread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the transformed value</dd>
</dl>
</li>
</ul>
<a name="blockingOp-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockingOp</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;blockingOp(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</pre>
<div class="block">Executes the given action with the promise value, on a blocking thread.
 <p>
 Similar to <a href="../../ratpack/exec/Promise.html#blockingMap-ratpack.func.Function-"><code>blockingMap(Function)</code></a>, but does not provide a new value.
 This can be used to do something with the value, without terminating the promise.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - the action to to perform with the value, on a blocking thread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the same value given to the action</dd>
</dl>
</li>
</ul>
<a name="next-ratpack.exec.Promise-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>@Deprecated
default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;next(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;next)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">replaced by <a href="../../ratpack/exec/Promise.html#replace-ratpack.exec.Promise-"><code>replace(Promise)</code></a> as of 1.1.0</span></div>
<div class="block">Deprecated.
 <p>
 Use <a href="../../ratpack/exec/Promise.html#replace-ratpack.exec.Promise-"><code>replace(Promise)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of value provided by the replacement promise</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>next</code> - the promise to replace <code>this</code> with</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
</dl>
</li>
</ul>
<a name="next-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;next(@NonBlocking
                        <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</pre>
<div class="block">Executes the provided, potentially asynchronous, <a href="../../ratpack/func/Action.html" title="interface in ratpack.func"><code>Action</code></a> with the promised value as input.
 <p>
 This method can be used when needing to perform an action with the promised value, without substituting the promised value.
 That is, the exact same object provided to the given action will be propagated downstream.
 <p>
 The given action is executed within an <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec"><code>Operation</code></a>, allowing it to perform asynchronous work.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import com.google.common.collect.Lists;

 import java.util.concurrent.TimeUnit;
 import java.util.Arrays;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     List&lt;String&gt; events = Lists.newLinkedList();
     ExecHarness.runSingle(c -&gt;
       Promise.value("foo")
        .next(v -&gt;
          Promise.value(v) // may be async
            .map(String::toUpperCase)
            .then(events::add)
        )
        .then(events::add)
     );
     assertEquals(Arrays.asList("FOO", "foo"), events);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - the action to execute with the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the original value</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#nextOp-ratpack.func.Function-"><code>nextOp(Function)</code></a></dd>
</dl>
</li>
</ul>
<a name="nextOp-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextOp</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;nextOp(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</pre>
<div class="block">Executes the operation returned by the given function.
 <p>
 This method can be used when needing to perform an operation returned by another object, based on the promised value.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.exec.Operation;

 import com.google.common.collect.Lists;

 import java.util.concurrent.TimeUnit;
 import java.util.Arrays;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {

   public static class CaseService {
     public Operation toUpper(String value, List&lt;String&gt; values) {
       return Operation.of(() -&gt; values.add(value.toUpperCase()));
     }
   }

   public static void main(String... args) throws Exception {
     CaseService service = new CaseService();
     List&lt;String&gt; events = Lists.newLinkedList();

     ExecHarness.runSingle(c -&gt;
       Promise.value("foo")
        .nextOp(v -&gt; service.toUpper(v, events))
        .then(events::add)
     );

     assertEquals(Arrays.asList("FOO", "foo"), events);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - a function that returns an operation that acts on the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the original value</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#next-ratpack.func.Action-"><code>next(Action)</code></a></dd>
</dl>
</li>
</ul>
<a name="nextOpIf-ratpack.func.Predicate-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextOpIf</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;nextOpIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                            <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</pre>
<div class="block">Executes the operation returned by the given function, if it satisfies the predicate.
 <p>
 This method can be used when needing to perform an operation returned by another object, based on the promised value.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.exec.Operation;

 import com.google.common.collect.Lists;

 import java.util.concurrent.TimeUnit;
 import java.util.Arrays;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {

   public static class CaseService {
     public Operation toUpper(String value, List&lt;String&gt; values) {
       return Operation.of(() -&gt; values.add(value.toUpperCase()));
     }
   }

   public static void main(String... args) throws Exception {
     CaseService service = new CaseService();
     List&lt;String&gt; events = Lists.newLinkedList();

     ExecHarness.runSingle(c -&gt;
       Promise.value("foo")
        .nextOpIf(v -&gt; v.startsWith("f"), v -&gt; service.toUpper(v, events))
        .nextOpIf(v -&gt; v.isEmpty(), v -&gt; Operation.of(() -&gt; events.add("empty")))
        .then(events::add)
     );

     assertEquals(Arrays.asList("FOO", "foo"), events);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition to satisfy in order to execute the operation.</dd>
<dd><code>function</code> - a function that returns an operation that acts on the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the original value</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="replace-ratpack.exec.Promise-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replace</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;replace(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;next)</pre>
<div class="block">Replaces <code>this</code> promise with the provided promise for downstream subscribers.
 <p>
 This is simply a more convenient form of <a href="../../ratpack/exec/Promise.html#flatMap-ratpack.func.Function-"><code>flatMap(Function)</code></a>, where the given promise is returned.
 This method can be used when a subsequent operation on a promise isn't dependent on the actual promised value.
 <p>
 If the upstream promise fails, its error will propagate downstream and the given promise will never be subscribed to.

  <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   private static String value;

   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .next(v -&gt; value = v)
           .replace(Promise.value("bar"))
     );

     assertEquals("bar", result.getValue());
     assertEquals("foo", value);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the value of the replacement promise</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>next</code> - the promise to replace <code>this</code> with</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1</dd>
</dl>
</li>
</ul>
<a name="left-ratpack.exec.Promise-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>left</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;left(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;left)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the given promise as the <code>left</code>.
 <p>
 The existing promised value will become the <code>right</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the left value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>left</code> - a promise for the left value of the result pair</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
</dl>
</li>
</ul>
<a name="left-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>left</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;left(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;leftFunction)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the result of the given function as the <code>left</code>.
 <p>
 The function is called with the promised value.
 The existing promised value will become the <code>right</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the left value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leftFunction</code> - a function that produces the left value from the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="flatLeft-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatLeft</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;O,<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;flatLeft(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;leftFunction)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the result of the given function as the <code>left</code>.
 <p>
 The function is called with the promised value.
 The existing promised value will become the <code>right</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the left value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leftFunction</code> - a function that produces a promise for the left value from the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="right-ratpack.exec.Promise-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>right</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;&nbsp;right(<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;right)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the given promise as the <code>right</code>.
 <p>
 The existing promised value will become the <code>left</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the right value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>right</code> - a promise for the right value of the result pair</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
</dl>
</li>
</ul>
<a name="right-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>right</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;&nbsp;right(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends O&gt;&nbsp;rightFunction)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the result of the given function as the <code>right</code>.
 <p>
 The function is called with the promised value.
 The existing promised value will become the <code>left</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the left value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rightFunction</code> - a function that produces the right value from the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="flatRight-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatRight</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,O&gt;&gt;&nbsp;flatRight(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;rightFunction)</pre>
<div class="block">Transforms the promised value to a <a href="../../ratpack/func/Pair.html" title="class in ratpack.func"><code>Pair</code></a>, with the value of the result of the given function as the <code>right</code>.
 <p>
 The function is called with the promised value.
 The existing promised value will become the <code>left</code>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the left value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rightFunction</code> - a function that produces a promise for the right value from the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="operation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>operation</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;operation()</pre>
<div class="block">Converts this promise to an operation, by effectively discarding the result.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an operation</dd>
</dl>
</li>
</ul>
<a name="operation-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>operation</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;operation(@NonBlocking
                            <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</pre>
<div class="block">Converts this promise to an operation which is effectively <code>action</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - an operation on the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an operation representing <code>action</code></dd>
</dl>
</li>
</ul>
<a name="flatOp-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatOp</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;flatOp(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&gt;&nbsp;function)</pre>
<div class="block">Converts this promise to an operation, which is the return of <code>function</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - a function that returns an operation for the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>effectively the return of <code>function</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.6</dd>
</dl>
</li>
</ul>
<a name="mapError-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;mapError(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;transformer)</pre>
<div class="block">Transforms the promise failure (potentially into a value) by applying the given function to it.
 <p>
 If the function returns a value, the promise will now be considered successful.
 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.&lt;String&gt;error(new Exception("!"))
           .mapError(e -&gt; "value")
     );

     assertEquals("value", result.getValue());
   }
 }
 </code></pre>
 <p>
 If the function throws an exception, that exception will now represent the promise failure.
 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.&lt;String&gt;error(new Exception("!"))
           .mapError(e -&gt; { throw new RuntimeException("mapped", e); })
     );

     assertEquals("mapped", result.getThrowable().getMessage());
   }
 }
 </code></pre>
 <p>
 The function will not be called if the promise is successful.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transformer</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
</dl>
</li>
</ul>
<a name="mapError-java.lang.Class-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapError</h4>
<pre>default&nbsp;&lt;E extends java.lang.Throwable&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;mapError(java.lang.Class&lt;E&gt;&nbsp;type,
                                                            <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super E,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;function)</pre>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.
 <p>
 This method is similar to <a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Function-"><code>mapError(Function)</code></a>, except that it will only apply if the error is of the given type.
 If the error is not of the given type, it will not be transformed and will propagate as normal.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
</dl>
</li>
</ul>
<a name="mapError-ratpack.func.Predicate-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;mapError(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
                            <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;function)</pre>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.
 <p>
 This method is similar to <a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Function-"><code>mapError(Function)</code></a>, except that it will only apply depending if it satisfies the predicate.
 If the error is not of the given type, it will not be transformed and will propagate as normal.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the predicate to test against the error</dd>
<dd><code>function</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.6.0</dd>
</dl>
</li>
</ul>
<a name="flatMapError-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMapError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;flatMapError(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</pre>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.
 <p>
 This method is similar to <a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Function-"><code>mapError(Function)</code></a>, except that it allows async transformation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
</dl>
</li>
</ul>
<a name="flatMapError-java.lang.Class-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMapError</h4>
<pre>default&nbsp;&lt;E extends java.lang.Throwable&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;flatMapError(java.lang.Class&lt;E&gt;&nbsp;type,
                                                                <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super E,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</pre>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.
 <p>
 This method is similar to <a href="../../ratpack/exec/Promise.html#mapError-java.lang.Class-ratpack.func.Function-"><code>mapError(Class, Function)</code></a>, except that it allows async transformation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
</dl>
</li>
</ul>
<a name="flatMapError-ratpack.func.Predicate-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMapError</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;flatMapError(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super java.lang.Throwable&gt;&nbsp;predicate,
                                <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super java.lang.Throwable,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;function)</pre>
<div class="block">Transforms a failure of the given type (potentially into a value) by applying the given function to it.
 <p>
 This method is similar to <a href="../../ratpack/exec/Promise.html#mapError-ratpack.func.Predicate-ratpack.func.Function-"><code>mapError(Predicate, Function)</code></a>, except that it allows async transformation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the predicate to test against the error</dd>
<dd><code>function</code> - the transformation to apply to the promise failure</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.6.0</dd>
</dl>
</li>
</ul>
<a name="apply-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;apply(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;function)</pre>
<div class="block">Applies the custom operation function to this promise.
 <p>
 This method can be used to apply custom operations without breaking the “code flow”.
 It works particularly well with method references.
 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     Integer value = ExecHarness.yieldSingle(e -&gt;
         Promise.value(1)
           .apply(Example::dubble)
           .apply(Example::triple)
     ).getValue();

     assertEquals(Integer.valueOf(6), value);
   }

   public static Promise&lt;Integer&gt; dubble(Promise&lt;Integer&gt; input) {
     return input.map(i -&gt; i * 2);
   }

   public static Promise&lt;Integer&gt; triple(Promise&lt;Integer&gt; input) {
     return input.map(i -&gt; i * 3);
   }
 }
 </code></pre>
 <p>
 If the apply function throws an exception, the returned promise will fail.
 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     Throwable error = ExecHarness.yieldSingle(e -&gt;
         Promise.value(1)
           .apply(Example::explode)
     ).getThrowable();

     assertEquals("bang!", error.getMessage());
   }

   public static Promise&lt;Integer&gt; explode(Promise&lt;Integer&gt; input) throws Exception {
     throw new Exception("bang!");
   }
 }
 </code></pre>
 <p>
 If the promise having the operation applied to fails, the operation will not be applied.
 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     Throwable error = ExecHarness.yieldSingle(e -&gt;
         Promise.&lt;Integer&gt;error(new Exception("bang!"))
           .apply(Example::dubble)
     ).getThrowable();

     assertEquals("bang!", error.getMessage());
   }

   public static Promise&lt;Integer&gt; dubble(Promise&lt;Integer&gt; input) {
     return input.map(i -&gt; i * 2);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of promised object after the operation</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the operation implementation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the transformed promise</dd>
</dl>
</li>
</ul>
<a name="to-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>to</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;O&nbsp;to(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends O&gt;&nbsp;function)
          throws java.lang.Exception</pre>
<div class="block">Applies the given function to <code>this</code> and returns the result.
 <p>
 This method can be useful when needing to convert a promise to another type as it facilitates doing so without breaking the “code flow”.
 For example, this can be used when integrating with RxJava.
 <pre class="java"><code>import ratpack.rx.RxRatpack;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.util.Arrays;
 import java.util.LinkedList;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {
   private static final List&lt;String&gt; LOG = new LinkedList&lt;&gt;();

   public static void main(String... args) throws Exception {
     ExecHarness.runSingle(e -&gt;
         Promise.value("foo")
           .to(RxRatpack::observe)
           .doOnNext(i -&gt; LOG.add("doOnNext"))
           .subscribe(LOG::add)
     );

     assertEquals(Arrays.asList("doOnNext", "foo"), LOG);
   }
 }
 </code></pre>
 <p>
 The given function is executed immediately.
 <p>
 This method should only be used when converting a promise to another type.
 See <a href="../../ratpack/exec/Promise.html#apply-ratpack.func.Function-"><code>apply(Function)</code></a> for applying custom promise operators.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type the promise will be converted to</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the promise conversion function</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the output of the given function</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - any thrown by the given function</dd>
</dl>
</li>
</ul>
<a name="flatMap-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMap</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;flatMap(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;transformer)</pre>
<div class="block">Transforms the promised value by applying the given function to it that returns a promise for the transformed value.
 <p>
 This is useful when the transformation involves an asynchronous operation.
 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.exec.Blocking;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String[] args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .flatMap(s -&gt; Blocking.get(s::toUpperCase))
           .map(s -&gt; s + "-BAR")
     );

     assertEquals("FOO-BAR", result.getValue());
   }
 }
 </code></pre>
 <p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>O</code> - the type of the transformed object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transformer</code> - the transformation to apply to the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the transformed value</dd>
</dl>
</li>
</ul>
<a name="flatMapIf-ratpack.func.Predicate-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMapIf</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;flatMapIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                             <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;transformer)</pre>
<div class="block">Transforms the promised value by applying the given function to it that returns a promise for the transformed value, if it satisfies the predicate.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .flatMapIf(s -&gt; s.contains("f"), s -&gt; Promise.value(s.toUpperCase()))
           .flatMapIf(s -&gt; s.contains("f"), s -&gt; Promise.value(s + "-BAR"))
     );

     assertEquals("FOO", result.getValue());
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition to satisfy in order to be transformed</dd>
<dd><code>transformer</code> - the transformation to apply to the promised value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="flatMapIf-ratpack.func.Predicate-ratpack.func.Function-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flatMapIf</h4>
<pre>default&nbsp;&lt;O&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&nbsp;flatMapIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                                 <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;onTrue,
                                 <a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>,? extends <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;O&gt;&gt;&nbsp;onFalse)</pre>
<div class="block">Transforms the promised value by applying one of the given functions to it that returns a promise for the transformed value, depending if it satisfies the predicate.

 <pre class="java"><code>import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecResult&lt;String&gt; result = ExecHarness.yieldSingle(c -&gt;
         Promise.value("foo")
           .flatMapIf(s -&gt; s.contains("f"), s -&gt; Promise.value(s.toUpperCase()), s -&gt; Promise.value(s))
           .flatMapIf(s -&gt; s.contains("f"), s -&gt; Promise.value(s), s -&gt; Promise.value(s + "-BAR"))
     );

     assertEquals("FOO-BAR", result.getValue());
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition to decide which transformation to apply</dd>
<dd><code>onTrue</code> - the transformation to apply to the promised value when the predicate is true</dd>
<dd><code>onFalse</code> - the transformation to apply to the promised value when the predicate is false</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="route-ratpack.func.Predicate-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>route</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;route(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;predicate,
                         <a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;action)</pre>
<div class="block">Allows the promised value to be handled specially if it meets the given predicate, instead of being handled by the promise subscriber.
 <p>
 This is typically used for validating values, centrally.
 <pre class="java"><code>import com.google.common.collect.Lists;
 import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;

 import java.util.List;

 import static org.junit.Assert.*;

 public class Example {
   public static ExecResult&lt;Integer&gt; yield(int i, List&lt;Integer&gt; collector) throws Exception {
     return ExecHarness.yieldSingle(c -&gt;
         Promise.value(i)
           .route(v -&gt; v &gt; 5, collector::add)
     );
   }

   public static void main(String... args) throws Exception {
     List&lt;Integer&gt; routed = Lists.newLinkedList();

     ExecResult&lt;Integer&gt; result1 = yield(1, routed);
     assertEquals(new Integer(1), result1.getValue());
     assertFalse(result1.isComplete()); // false because promise returned a value before the execution completed
     assertTrue(routed.isEmpty());

     ExecResult&lt;Integer&gt; result10 = yield(10, routed);
     assertNull(result10.getValue());
     assertTrue(result10.isComplete()); // true because the execution completed before the promised value was returned (i.e. it was routed)
     assertTrue(routed.contains(10));
   }
 }
 </code></pre>
 <p>
 Be careful about using this where the eventual promise subscriber is unlikely to know that the promise
 will routed as it can be surprising when neither the promised value nor an error appears.
 <p>
 It can be useful at the handler layer to provide common validation.
 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.handling.Context;
 import ratpack.test.embed.EmbeddedApp;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static Promise&lt;Integer&gt; getAge(Context ctx) {
     return Promise.value(10)
       .route(
         i -&gt; i &lt; 21,
         i -&gt; ctx.render(i + " is too young to be here!")
       );
   }

   public static void main(String... args) throws Exception {
     EmbeddedApp.fromHandler(ctx -&gt;
         getAge(ctx).then(age -&gt; ctx.render("welcome!"))
     ).test(httpClient -&gt; {
       assertEquals("10 is too young to be here!", httpClient.getText());
     });
   }
 }
 </code></pre>
 <p>
 If the routed-to action throws an exception, it will be forwarded down the promise chain.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - the condition under which the value should be routed</dd>
<dd><code>action</code> - the terminal action for the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a routed promise</dd>
</dl>
</li>
</ul>
<a name="onNull-ratpack.func.Block-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onNull</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;onNull(<a href="../../ratpack/func/Block.html" title="interface in ratpack.func">Block</a>&nbsp;action)</pre>
<div class="block">A convenience shorthand for <a href="../../ratpack/exec/Promise.html#route-ratpack.func.Predicate-ratpack.func.Action-"><code>routing</code></a> <code>null</code> values.
 <p>
 If the promised value is <code>null</code>, the given action will be called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - the action to route to if the promised value is null</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a routed promise</dd>
</dl>
</li>
</ul>
<a name="cache--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;cache()</pre>
<div class="block">Caches the promised value (or error) and returns it to all subscribers.
 <p>
 This method is equivalent to using <a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-"><code>cacheResultIf(Predicate)</code></a> with a predicate that always returns <code>true</code>.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.util.concurrent.atomic.AtomicLong;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecHarness.runSingle(c -&gt; {
       AtomicLong counter = new AtomicLong();
       Promise&lt;Long&gt; uncached = Promise.async(f -&gt; f.success(counter.getAndIncrement()));

       uncached.then(i -&gt; assertEquals(0l, i.longValue()));
       uncached.then(i -&gt; assertEquals(1l, i.longValue()));
       uncached.then(i -&gt; assertEquals(2l, i.longValue()));

       Promise&lt;Long&gt; cached = uncached.cache();

       cached.then(i -&gt; assertEquals(3l, i.longValue()));
       cached.then(i -&gt; assertEquals(3l, i.longValue()));

       uncached.then(i -&gt; assertEquals(4l, i.longValue()));
       cached.then(i -&gt; assertEquals(3l, i.longValue()));
     });
   }
 }
 </code></pre>

 <p>
 If the cached promise fails, the same exception will be returned every time.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import static org.junit.Assert.assertTrue;

 public class Example {
   public static void main(String... args) throws Exception {
     ExecHarness.runSingle(c -&gt; {
       Throwable error = new Exception("bang!");
       Promise&lt;Object&gt; cached = Promise.error(error).cache();
       cached.onError(t -&gt; assertTrue(t == error)).then(i -&gt; assertTrue("not called", false));
       cached.onError(t -&gt; assertTrue(t == error)).then(i -&gt; assertTrue("not called", false));
       cached.onError(t -&gt; assertTrue(t == error)).then(i -&gt; assertTrue("not called", false));
     });
   }
 }
 </code></pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a caching promise</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#cacheIf-ratpack.func.Predicate-"><code>cacheIf(Predicate)</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-"><code>cacheResultIf(Predicate)</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheResultFor-ratpack.func.Function-"><code>cacheResultFor(Function)</code></a></dd>
</dl>
</li>
</ul>
<a name="cacheIf-ratpack.func.Predicate-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheIf</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;cacheIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;shouldCache)</pre>
<div class="block">Caches the promise value and provides it to all future subscribers, if it satisfies the predicate.
 <p>
 This method is equivalent to using <a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-"><code>cacheResultIf(Predicate)</code></a> with a predicate that requires
 a successful result and for the value to satisfy the predicate given to this method.
 <p>
 Non success results will not be cached.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shouldCache</code> - the test for whether a successful result is cacheable</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a caching promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-"><code>cacheResultIf(Predicate)</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheResultFor-ratpack.func.Function-"><code>cacheResultFor(Function)</code></a></dd>
</dl>
</li>
</ul>
<a name="cacheResultIf-ratpack.func.Predicate-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheResultIf</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;cacheResultIf(<a href="../../ratpack/func/Predicate.html" title="interface in ratpack.func">Predicate</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;shouldCache)</pre>
<div class="block">Caches the promise result eternally and provide it to all future subscribers, if it satisfies the predicate.

 <pre class="java"><code>import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.util.ArrayList;
 import java.util.List;
 import java.util.concurrent.atomic.AtomicInteger;

 import static org.junit.Assert.assertEquals;

 public class Example {

   public static void main(String... args) throws Exception {
     List&lt;ExecResult&lt;Integer&gt;&gt; results = new ArrayList&lt;&gt;();
     AtomicInteger counter = new AtomicInteger();
     Promise&lt;Integer&gt; promise = Promise.sync(() -&gt; {
       int i = counter.getAndIncrement();
       if (i &lt; 2) {
         return i;
       } else if (i == 2) {
         throw new Exception(Integer.toString(i));
       } else if (i == 3) {
         throw new RuntimeException(Integer.toString(i));
       } else {
         throw new IllegalStateException(Integer.toString(i));
       }
     });

     Promise&lt;Integer&gt; cachedPromise = promise.cacheResultIf(r -&gt;
       (r.isError() &amp;&amp; r.getThrowable().getClass() == RuntimeException.class)
         || (r.isSuccess() &amp;&amp; r.getValue() &gt; 10)
     );

     ExecHarness.runSingle(e -&gt; {
       for (int i = 0; i &lt; 6; i++) {
         cachedPromise.result(results::add);
       }
     });

     assertEquals(results.get(0).getValueOrThrow(), Integer.valueOf(0));
     assertEquals(results.get(1).getValueOrThrow(), Integer.valueOf(1));
     assertEquals(results.get(2).getThrowable().getClass(), Exception.class);
     assertEquals(results.get(3).getThrowable().getClass(), RuntimeException.class);

     // value is now cached
     assertEquals(results.get(4).getThrowable().getClass(), RuntimeException.class);
     assertEquals(results.get(5).getThrowable().getClass(), RuntimeException.class);
   }
 }
 </code></pre>

 <p>
 Note, the cached value never expires.
 If you wish to cache for a certain amount of time, use <a href="../../ratpack/exec/Promise.html#cacheResultFor-ratpack.func.Function-"><code>cacheResultFor(Function)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shouldCache</code> - the test for whether a result is cacheable</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a caching promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#cache--"><code>cache()</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheIf-ratpack.func.Predicate-"><code>cacheIf(Predicate)</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheResultFor-ratpack.func.Function-"><code>cacheResultFor(Function)</code></a></dd>
</dl>
</li>
</ul>
<a name="cacheResultFor-ratpack.func.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheResultFor</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;cacheResultFor(<a href="../../ratpack/func/Function.html" title="interface in ratpack.func">Function</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,java.time.Duration&gt;&nbsp;cacheFor)</pre>
<div class="block">Caches the promise result for a calculated amount of time.
 <p>
 A cached promise is fully threadsafe and and can be subscribed to concurrently.
 While there is no valid cached value, yielding the upstream value is serialised.
 That is, one value is requested at a time regardless of concurrent subscription.
 <p>
 As the result is received, it is given to the <code>ttlFunc</code> which determines how long to cache it for.
 A <code>Duration.ZERO</code> duration indicates that the value should not be cached.
 Any <code>Duration.isNegative()</code> duration indicates that the value should be cached eternally.
 Any other duration indicates how long to cache the result for.
 <p>
 If the promise is subscribed to again after the cached value has expired, the process repeats.
 <p>
 As such promises tend to be held and reused, it is sometimes necessary to consider garbage collection implications.
 A caching promise (like all multi-use promises) must retain all of its upstream functions/objects.
 Care should be taken to ensure that this does not cause long lived references to objects that should be collected.
 <p>
 It is common to use cached promises in conjunction with a cache implementation such as Google Guava or Caffeine.

 <pre class="java"><code>import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.util.ArrayList;
 import java.util.List;
 import java.time.Duration;
 import java.util.concurrent.atomic.AtomicInteger;

 import static org.junit.Assert.assertEquals;

 public class Example {

   public static void main(String... args) throws Exception {
     List&lt;Integer&gt; results = new ArrayList&lt;&gt;();
     AtomicInteger counter = new AtomicInteger();
     Promise&lt;Integer&gt; promise = Promise.sync(counter::getAndIncrement)
       .cacheResultFor(
         i -&gt; i.isSuccess() &amp;&amp; i.getValue() &gt; 1
         ? Duration.ofSeconds(1)
         : Duration.ZERO
       );

     for (int i = 0; i &lt; 4; ++i) {
       ExecHarness.runSingle(e -&gt; promise.then(results::add));
     }

     // let the cache entry expire
     Thread.sleep(1500);

     for (int i = 0; i &lt; 2; ++i) {
       ExecHarness.runSingle(e -&gt; promise.then(results::add));
     }

     assertEquals(results.get(0), Integer.valueOf(0));
     assertEquals(results.get(1), Integer.valueOf(1));
     assertEquals(results.get(2), Integer.valueOf(2));
     assertEquals(results.get(3), Integer.valueOf(2));

     // cache entry has expired

     assertEquals(results.get(4), Integer.valueOf(3));
     assertEquals(results.get(5), Integer.valueOf(3));
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cacheFor</code> - a function that determines how long to cache the given result for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a caching promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#cache--"><code>cache()</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheIf-ratpack.func.Predicate-"><code>cacheIf(Predicate)</code></a>, 
<a href="../../ratpack/exec/Promise.html#cacheResultIf-ratpack.func.Predicate-"><code>cacheResultIf(Predicate)</code></a></dd>
</dl>
</li>
</ul>
<a name="defer-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defer</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;defer(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.lang.Runnable&gt;&nbsp;releaser)</pre>
<div class="block">Defers the subscription of <code>this</code> promise until later.
 <p>
 When the returned promise is subscribed to, the given <code>releaser</code> action will be invoked.
 The execution of <code>this</code> promise is deferred until the runnable given to the <code>releaser</code> is run.
 <p>
 It is important to note that this defers the <i>subscription</i> of the promise, not the delivery of the value.
 <p>
 It is generally more convenient to use <a href="../../ratpack/exec/Promise.html#throttled-ratpack.exec.Throttle-"><code>throttled(Throttle)</code></a> or <a href="../../ratpack/exec/Promise.html#onYield-java.lang.Runnable-"><code>onYield(Runnable)</code></a> than this operation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>releaser</code> - the action that will initiate the execution some time later</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a deferred promise</dd>
</dl>
</li>
</ul>
<a name="defer-java.time.Duration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defer</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;defer(java.time.Duration&nbsp;duration)</pre>
<div class="block">Defers the subscription of <code>this</code> promise for the given duration.
 <p>
 This operation is roughly the promise based analog of <a href="../../ratpack/exec/Execution.html#sleep-java.time.Duration-ratpack.func.Block-"><code>Execution.sleep(Duration, Block)</code></a>.
 <p>
 The given duration must be non-negative.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>duration</code> - the amount of time to defer for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a deferred promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#defer-ratpack.func.Action-"><code>defer(Action)</code></a></dd>
</dl>
</li>
</ul>
<a name="onYield-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onYield</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;onYield(java.lang.Runnable&nbsp;onYield)</pre>
<div class="block">Registers a listener that is invoked when <code>this</code> promise is initiated.
 <pre class="java"><code>import com.google.common.collect.Lists;
 import ratpack.test.exec.ExecHarness;
 import ratpack.exec.Promise;

 import java.util.Arrays;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     List&lt;String&gt; events = Lists.newLinkedList();
     ExecHarness.runSingle(c -&gt;
         Promise.&lt;String&gt;sync(() -&gt; {
           events.add("promise");
           return "foo";
         })
           .onYield(() -&gt; events.add("onYield"))
           .then(v -&gt; events.add("then"))
     );
     assertEquals(Arrays.asList("onYield", "promise", "then"), events);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>onYield</code> - the action to take when the promise is initiated</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>effectively, <code>this</code> promise</dd>
</dl>
</li>
</ul>
<a name="wiretap-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wiretap</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;wiretap(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec">Result</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&gt;&nbsp;listener)</pre>
<div class="block">Registers a listener for the promise outcome.
 <pre class="java"><code>import com.google.common.collect.Lists;
 import ratpack.test.exec.ExecHarness;
 import ratpack.exec.Promise;

 import java.util.Arrays;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String... args) throws Exception {
     List&lt;String&gt; events = Lists.newLinkedList();
     ExecHarness.runSingle(c -&gt;
         Promise.&lt;String&gt;sync(() -&gt; {
           events.add("promise");
           return "foo";
         })
           .wiretap(r -&gt; events.add("wiretap: " + r.getValue()))
           .then(v -&gt; events.add("then"))
     );

     assertEquals(Arrays.asList("promise", "wiretap: foo", "then"), events);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - the result listener</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>effectively, <code>this</code> promise</dd>
</dl>
</li>
</ul>
<a name="throttled-ratpack.exec.Throttle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throttled</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;throttled(<a href="../../ratpack/exec/Throttle.html" title="interface in ratpack.exec">Throttle</a>&nbsp;throttle)</pre>
<div class="block">Throttles <code>this</code> promise, using the given <a href="../../ratpack/exec/Throttle.html" title="interface in ratpack.exec"><code>throttle</code></a>.
 <p>
 Throttling can be used to limit concurrency.
 Typically to limit concurrent use of an external resource, such as a HTTP API.
 <p>
 Note that the <a href="../../ratpack/exec/Throttle.html" title="interface in ratpack.exec"><code>Throttle</code></a> instance given defines the actual throttling semantics.
 <pre class="java"><code>import ratpack.exec.Throttle;
 import ratpack.exec.Promise;
 import ratpack.exec.Execution;
 import ratpack.test.exec.ExecHarness;
 import ratpack.exec.ExecResult;

 import java.util.concurrent.atomic.AtomicInteger;

 import static org.junit.Assert.assertTrue;

 public class Example {
   public static void main(String... args) throws Exception {
     int numJobs = 1000;
     int maxAtOnce = 10;

     ExecResult&lt;Integer&gt; result = ExecHarness.yieldSingle(exec -&gt; {
       AtomicInteger maxConcurrent = new AtomicInteger();
       AtomicInteger active = new AtomicInteger();
       AtomicInteger done = new AtomicInteger();

       Throttle throttle = Throttle.ofSize(maxAtOnce);

       // Launch numJobs forked executions, and return the maximum number that were executing at any given time
       return Promise.async(downstream -&gt; {
         for (int i = 0; i &lt; numJobs; i++) {
           Execution.fork().start(forkedExec -&gt;
             Promise.sync(() -&gt; {
               int activeNow = active.incrementAndGet();
               int maxConcurrentVal = maxConcurrent.updateAndGet(m -&gt; Math.max(m, activeNow));
               active.decrementAndGet();
               return maxConcurrentVal;
             })
             .throttled(throttle) // limit concurrency
             .then(max -&gt; {
               if (done.incrementAndGet() == numJobs) {
                 downstream.success(max);
               }
             })
           );
         }
       });
     });

     assertTrue(result.getValue() &lt;= maxAtOnce);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>throttle</code> - the particular throttle to use to throttle the operation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the throttled promise</dd>
</dl>
</li>
</ul>
<a name="close-java.lang.AutoCloseable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;close(java.lang.AutoCloseable&nbsp;closeable)</pre>
<div class="block">Closes the given closeable when the value or error propagates to this point.
 <p>
 This can be used to simulate a try/finally synchronous construct.
 It is typically used to close some resource after an asynchronous operation.

 <pre class="java"><code>import org.junit.Assert;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 public class Example {
   static class MyResource implements AutoCloseable {
     final boolean inError;
     boolean closed;

     public MyResource(boolean inError) {
       this.inError = inError;
     }

     {@literal @}Override
     public void close() {
       closed = true;
     }
   }

   static Promise&lt;String&gt; resourceUsingMethod(MyResource resource) {
     return Promise.sync(() -&gt; {
       if (resource.inError) {
         throw new Exception("error!");
       } else {
         return "ok!";
       }
     });
   }

   public static void main(String[] args) throws Exception {
     ExecHarness.runSingle(e -&gt; {
       MyResource myResource = new MyResource(false);
       resourceUsingMethod(myResource)
         .close(myResource)
         .then(value -&gt; Assert.assertTrue(myResource.closed));
     });

     ExecHarness.runSingle(e -&gt; {
       MyResource myResource = new MyResource(true);
       resourceUsingMethod(myResource)
         .close(myResource)
         .onError(error -&gt; Assert.assertTrue(myResource.closed))
         .then(value -&gt; {
           throw new UnsupportedOperationException("should not reach here!");
         });
     });

   }
 }
 </code></pre>
 <p>
 The general pattern is to open the resource, and then pass it to some method/closure that works with it and returns a promise.
 This method is then called on the returned promise to cleanup the resource.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>closeable</code> - the closeable to close</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#close-ratpack.exec.Operation-"><code>close(Operation)</code></a></dd>
</dl>
</li>
</ul>
<a name="close-ratpack.exec.Operation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;close(<a href="../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;closer)</pre>
<div class="block">Like <a href="../../ratpack/exec/Promise.html#close-java.lang.AutoCloseable-"><code>close(AutoCloseable)</code></a>, but allows async close operations.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>closer</code> - the close operation.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="time-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>time</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;time(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super java.time.Duration&gt;&nbsp;action)</pre>
<div class="block">Emits the time taken from when the promise is subscribed to to when the result is available.
 <p>
 The given <code>action</code> is called regardless of whether the promise is successful or not.
 <p>
 If the promise fails and this method throws an exception, the original exception will propagate with the thrown exception suppressed.
 If the promise succeeds and this method throws an exception, the thrown exception will propagate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - a callback for the time</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>effectively <code>this</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#timeResult-ratpack.func.BiAction-"><code>timeResult(BiAction)</code></a></dd>
</dl>
</li>
</ul>
<a name="timeResult-ratpack.func.BiAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeResult</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;timeResult(<a href="../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? super java.time.Duration&gt;&nbsp;action)</pre>
<div class="block">Emits the time taken from when the promise is subscribed to to when the result is available.
 <p>
 The given <code>action</code> is called regardless of whether the promise is successful or not.
 <p>
 If the promise fails and this method throws an exception, the original exception will propagate with the thrown exception suppressed.
 If the promise succeeds and this method throws an exception, the thrown exception will propagate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>action</code> - a callback for the time</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>effectively <code>this</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#time-ratpack.func.Action-"><code>time(Action)</code></a></dd>
</dl>
</li>
</ul>
<a name="timeResult--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeResult</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/func/Pair.html" title="class in ratpack.func">Pair</a>&lt;<a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,java.time.Duration&gt;&gt;&nbsp;timeResult()</pre>
</li>
</ul>
<a name="around-ratpack.func.Factory-ratpack.func.BiFunction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>around</h4>
<pre>default&nbsp;&lt;B,A&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;A&gt;&nbsp;around(ratpack.func.Factory&lt;? extends B&gt;&nbsp;before,
                                <a href="../../ratpack/func/BiFunction.html" title="interface in ratpack.func">BiFunction</a>&lt;? super B,? super <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;,? extends <a href="../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;A&gt;&gt;&nbsp;after)</pre>
<div class="block">Facilitates capturing a value before the the promise is subscribed and using it to later augment the result.
 <p>
 The <code>before</code> factory is invoked as the promise is subscribed.
 As the promise result becomes available, it and the result are given to the <code>after</code> function.
 The return value of the <code>after</code> function forms the basis of the promise returned from this method.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>B</code> - the before value type</dd>
<dd><code>A</code> - the after value type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>before</code> - the before value supplier</dd>
<dd><code>after</code> - the after function</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
<a name="fork-ratpack.func.Action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fork</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;fork(<a href="../../ratpack/func/Action.html" title="interface in ratpack.func">Action</a>&lt;? super <a href="../../ratpack/exec/ExecSpec.html" title="interface in ratpack.exec">ExecSpec</a>&gt;&nbsp;execSpec)
                 throws java.lang.Exception</pre>
<div class="block">Forks a new execution and subscribes to this promise, returning a promise for its value.
 <p>
 The new execution is created and started immediately by this method, effectively subscribing to the promise immediately.
 The returned promise provides the value when the execution completes.
 <p>
 This method can be used for simple of processing.
 It is often combined with the <a href="../../ratpack/exec/Promise.html#left-ratpack.exec.Promise-"><code>left(Promise)</code></a> or <a href="../../ratpack/exec/Promise.html#right-ratpack.exec.Promise-"><code>right(Promise)</code></a>.

 <pre class="java"><code>import ratpack.exec.Blocking;
 import ratpack.exec.Promise;
 import ratpack.func.Pair;
 import ratpack.test.exec.ExecHarness;

 import java.util.concurrent.CyclicBarrier;

 import static org.junit.Assert.assertEquals;

 public class Example {

   public static void main(String... args) throws Exception {
     CyclicBarrier barrier = new CyclicBarrier(2);

     Pair&lt;Integer, String&gt; result = ExecHarness.yieldSingle(r -&gt; {
       Promise&lt;Integer&gt; p1 = Blocking.get(() -&gt; {
         barrier.await();
         return 1;
       });
       Promise&lt;String&gt; p2 = Blocking.get(() -&gt; {
         barrier.await();
         return "2";
       });

       return p1.right(p2.fork());
     }).getValueOrThrow();

     assertEquals(result, Pair.of(1, "2"));
   }

 }
 </code></pre>
 <p>
 <b>Warning:</b> be mindful of error handling for forked promises.
 If the forked promise is never subscribed to, its failure may go unnoticed.
 In scenarios, where it cannot be guaranteed that the forked promise will be subscribed to
 or that subscribers would satisfactorily deal with error conditions,
 consider <i>listening</i> for errors by using <a href="../../ratpack/exec/Promise.html#wiretap-ratpack.func.Action-"><code>wiretap(Action)</code></a> before <a href="../../ratpack/exec/Promise.html#fork--"><code>fork()</code></a>
 and logging the error or similar.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>execSpec</code> - configuration for the forked execution</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - any thrown by <code>execSpec</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="fork--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fork</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;fork()</pre>
<div class="block">Forks a new execution and subscribes to this promise, returning a promise for its value.
 <p>
 This method delegates to <a href="../../ratpack/exec/Promise.html#fork-ratpack.func.Action-"><code>fork(Action)</code></a> with <a href="../../ratpack/func/Action.html#noop--"><code>Action.noop()</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#fork-ratpack.func.Action-"><code>fork(Action)</code></a></dd>
</dl>
</li>
</ul>
<a name="retry-int-java.time.Duration-ratpack.func.BiAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retry</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;retry(int&nbsp;maxAttempts,
                         java.time.Duration&nbsp;delay,
                         @NonBlocking
                         <a href="../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super java.lang.Integer,? super java.lang.Throwable&gt;&nbsp;onError)</pre>
<div class="block">Causes <code>this</code> yielding the promised value to be retried on error, after a fixed delay.
 <p>
 The given function is invoked for each failure,
 with the sequence number of the failure as the first argument and the failure exception as the second.
 This may be used to log or collect exceptions.
 If all errors are to be ignored, use <a href="../../ratpack/func/BiAction.html#noop--"><code>BiAction.noop()</code></a>.
 <p>
 Any exception thrown by the function – possibly the exception it receives as an argument – will
 be propagated to the subscriber, yielding a failure.
 This can be used to selectively retry on certain failures, but immediately fail on others.
 <p>
 If the promise fails <code>maxAttempts</code> times,
 the given function will not be invoked and the most and the most recent exception will propagate.
 <p>
 To retry immediately, pass a zero duration.
 Use <a href="../../ratpack/exec/Promise.html#retry-int-ratpack.func.BiFunction-"><code>retry(int, BiFunction)</code></a> if desiring a dynamic (e.g. increasing) delay between attempts.

 <pre class="java"><code>import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.time.Duration;
 import java.util.Arrays;
 import java.util.LinkedList;
 import java.util.List;
 import java.util.concurrent.atomic.AtomicInteger;

 import static org.junit.Assert.assertEquals;

 public class Example {
   private static final List&lt;String&gt; LOG = new LinkedList&lt;&gt;();

   public static void main(String... args) throws Exception {
     AtomicInteger source = new AtomicInteger();

     ExecResult&lt;Integer&gt; result = ExecHarness.yieldSingle(exec -&gt;
       Promise.sync(source::incrementAndGet)
         .mapIf(i -&gt; i &lt; 3, i -&gt; { throw new IllegalStateException(); })
         .retry(3, Duration.ofMillis(500), (i, t) -&gt; LOG.add("retry attempt: " + i))
     );

     assertEquals(Integer.valueOf(3), result.getValue());
     assertEquals(Arrays.asList("retry attempt: 1", "retry attempt: 2"), LOG);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxAttempts</code> - the maximum number of times to retry</dd>
<dd><code>delay</code> - the duration to wait between retry attempts</dd>
<dd><code>onError</code> - the error handler</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise with a retry error handler</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#retry-int-ratpack.func.BiFunction-"><code>retry(int, BiFunction)</code></a></dd>
</dl>
</li>
</ul>
<a name="retry-int-ratpack.func.BiFunction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retry</h4>
<pre>default&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;retry(int&nbsp;maxAttempts,
                         <a href="../../ratpack/func/BiFunction.html" title="interface in ratpack.func">BiFunction</a>&lt;? super java.lang.Integer,? super java.lang.Throwable,<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.time.Duration&gt;&gt;&nbsp;onError)</pre>
<div class="block">Causes <code>this</code> yielding the promised value to be retried on error, after a calculated delay.
 <p>
 The given function is invoked for each failure,
 with the sequence number of the failure as the first argument and the failure exception as the second.
 It should return the duration of time to wait before retrying.
 To retry immediately, return a zero duration.
 Use <a href="../../ratpack/exec/Promise.html#retry-int-java.time.Duration-ratpack.func.BiAction-"><code>retry(int, Duration, BiAction)</code></a> if desiring a fixed delay between attempts.
 <p>
 Any exception thrown by the function – possibly the exception it receives as an argument – will
 be propagated to the subscriber, yielding a failure.
 This can be used to selectively retry on certain failures, but immediately fail on others.
 <p>
 If the promise fails <code>maxAttempts</code> times,
 the given function will not be invoked and the most and the most recent exception will propagate.

 <pre class="java"><code>import ratpack.exec.ExecResult;
 import ratpack.exec.Promise;
 import ratpack.test.exec.ExecHarness;

 import java.time.Duration;
 import java.util.Arrays;
 import java.util.LinkedList;
 import java.util.List;
 import java.util.concurrent.atomic.AtomicInteger;

 import static org.junit.Assert.assertEquals;

 public class Example {
   private static final List&lt;String&gt; LOG = new LinkedList&lt;&gt;();

   public static void main(String... args) throws Exception {
     AtomicInteger source = new AtomicInteger();

     ExecResult&lt;Integer&gt; result = ExecHarness.yieldSingle(exec -&gt;
       Promise.sync(source::incrementAndGet)
         .mapIf(i -&gt; i &lt; 3, i -&gt; { throw new IllegalStateException(); })
         .retry(3, (i, t) -&gt; {
           LOG.add("retry attempt: " + i);
           return Promise.value(Duration.ofMillis(500 * i));
         })
     );

     assertEquals(Integer.valueOf(3), result.getValue());
     assertEquals(Arrays.asList("retry attempt: 1", "retry attempt: 2"), LOG);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxAttempts</code> - the maximum number of times to retry</dd>
<dd><code>onError</code> - the error handler</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise with a retry error handler</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../ratpack/exec/Promise.html#retry-int-java.time.Duration-ratpack.func.BiAction-"><code>retry(int, Duration, BiAction)</code></a></dd>
</dl>
</li>
</ul>
<a name="toCompletableFuture--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toCompletableFuture</h4>
<pre>default&nbsp;java.util.concurrent.CompletableFuture&lt;<a href="../../ratpack/exec/Promise.html" title="type parameter in Promise">T</a>&gt;&nbsp;toCompletableFuture()</pre>
<div class="block">Convert this promise into a <code>CompletableFuture</code>.
 <p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletableFuture</code> that will complete successfully or exceptionally on the current execution thread.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.6</dd>
</dl>
</li>
</ul>
<a name="toPromise-java.util.concurrent.CompletableFuture-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toPromise</h4>
<pre>static&nbsp;&lt;T&gt;&nbsp;<a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;T&gt;&nbsp;toPromise(java.util.concurrent.CompletableFuture&lt;T&gt;&nbsp;future)</pre>
<div class="block">Convert a <code>CompletableFuture</code> into a promise.
 <p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of the promised value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>future</code> - the <code>CompletableFuture</code> to convert into a <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec"><code>Promise</code></a></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <a href="../../ratpack/exec/Promise.html" title="interface in ratpack.exec"><code>Promise</code></a> that will be consumed on the current execution thread.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.6</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ratpack/exec/OverlappingExecutionException.html" title="class in ratpack.exec"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ratpack/exec/Result.html" title="interface in ratpack.exec"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ratpack/exec/Promise.html" target="_top">Frames</a></li>
<li><a href="Promise.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
