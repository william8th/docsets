<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Thu Dec 20 19:53:55 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Batch (ratpack-exec 1.6.0 API)</title>
<meta name="date" content="2018-12-20">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Batch (ratpack-exec 1.6.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../ratpack/exec/util/ParallelBatch.html" title="interface in ratpack.exec.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?ratpack/exec/util/Batch.html" target="_top">Frames</a></li>
<li><a href="Batch.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ratpack.exec.util</div>
<h2 title="Interface Batch" class="title">Interface Batch&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of value produced by each promise in the batch</dd>
</dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../ratpack/exec/util/ParallelBatch.html" title="interface in ratpack.exec.util">ParallelBatch</a>&lt;T&gt;, <a href="../../../ratpack/exec/util/SerialBatch.html" title="interface in ratpack.exec.util">SerialBatch</a>&lt;T&gt;</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">Batch&lt;T&gt;</span></pre>
<div class="block">A batch of promises to be processed.
 <p>
 See <a href="../../../ratpack/exec/util/SerialBatch.html" title="interface in ratpack.exec.util"><code>SerialBatch</code></a> and <a href="../../../ratpack/exec/util/ParallelBatch.html" title="interface in ratpack.exec.util"><code>ParallelBatch</code></a>.

 <pre class="java"><code>import ratpack.exec.Promise;
 import ratpack.exec.util.Batch;
 import ratpack.exec.util.ParallelBatch;
 import ratpack.test.exec.ExecHarness;

 import java.util.ArrayList;
 import java.util.List;

 import static org.junit.Assert.assertEquals;

 public class Example {
   public static void main(String[] args) throws Exception {
     int sum = ExecHarness.yieldSingle(e -&gt; {

       List&lt;Promise&lt;Integer&gt;&gt; promises = new ArrayList&lt;&gt;();
       for (int i = 0; i &lt; 100; i++) {
         promises.add(Promise.value(i));
       }

       return ParallelBatch.of(promises)
         .publisher()
         .reduce(0, (r, i) -&gt; r + i);

     }).getValueOrThrow();

     assertEquals(sum, 4950);
   }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../ratpack/exec/util/Batch.html#forEach-ratpack.func.BiAction-">forEach</a></span>(<a href="../../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super java.lang.Integer,? super <a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&nbsp;consumer)</code>
<div class="block">Processes the promises of the batch, stopping at the first error, emitting results to the given callback.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../ratpack/stream/TransformablePublisher.html" title="interface in ratpack.stream">TransformablePublisher</a>&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../ratpack/exec/util/Batch.html#publisher--">publisher</a></span>()</code>
<div class="block">Creates a publisher that emits the promised values.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.util.List&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../ratpack/exec/util/Batch.html#yield--">yield</a></span>()</code>
<div class="block">Processes all the promises of the batch, stopping at the first error.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.util.List&lt;? extends <a href="../../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../ratpack/exec/util/Batch.html#yieldAll--">yieldAll</a></span>()</code>
<div class="block">Processes all the promises of the batch, collecting any errors.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="yieldAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>yieldAll</h4>
<pre><a href="../../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.util.List&lt;? extends <a href="../../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec">ExecResult</a>&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&gt;&gt;&nbsp;yieldAll()</pre>
<div class="block">Processes all the promises of the batch, collecting any errors.
 <p>
 This method differs from <a href="../../../ratpack/exec/util/Batch.html#yield--"><code>yield()</code></a> in that every promise will be processed, regardless of any failure.
 As such, it returns <a href="../../../ratpack/exec/ExecResult.html" title="interface in ratpack.exec"><code>ExecResult</code></a> objects representing the outcome as it may be an error.
 <p>
 The promise returned from this method will not fail, as failure is conveyed via the result objects of the list.
 <p>
 The order of the entries in the promised list corresponds to the order of the promises originally.
 That is, it is guaranteed that the 2nd item in the list was the 2nd promise specified.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for the result of each promise</dd>
</dl>
</li>
</ul>
<a name="yield--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>yield</h4>
<pre><a href="../../../ratpack/exec/Promise.html" title="interface in ratpack.exec">Promise</a>&lt;java.util.List&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&gt;&nbsp;yield()</pre>
<div class="block">Processes all the promises of the batch, stopping at the first error.
 <p>
 This method differs from <a href="../../../ratpack/exec/util/Batch.html#yieldAll--"><code>yieldAll()</code></a> in that processing will be halted as soon as the first error occurs.
 The error will be propagated through the returned promise.
 <p>
 The order of the entries in the promised list corresponds to the order of the promises originally.
 That is, it is guaranteed that the 2nd item in the list was the 2nd promise specified.
 It does not reflect the order in which promises completed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a promise for each promised value</dd>
</dl>
</li>
</ul>
<a name="forEach-ratpack.func.BiAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forEach</h4>
<pre><a href="../../../ratpack/exec/Operation.html" title="interface in ratpack.exec">Operation</a>&nbsp;forEach(<a href="../../../ratpack/func/BiAction.html" title="interface in ratpack.func">BiAction</a>&lt;? super java.lang.Integer,? super <a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&nbsp;consumer)</pre>
<div class="block">Processes the promises of the batch, stopping at the first error, emitting results to the given callback.
 <p>
 This method is useful for aggregating or reducing the batch.
 <p>
 The returned operation will complete after all items have been consumed or if there is an error.
 <p>
 The integer value given the to consumer indicates the source position of the corresponding promise.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>consumer</code> - the consumer of promise values</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an operation for the consumption of the values</dd>
</dl>
</li>
</ul>
<a name="publisher--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>publisher</h4>
<pre><a href="../../../ratpack/stream/TransformablePublisher.html" title="interface in ratpack.stream">TransformablePublisher</a>&lt;<a href="../../../ratpack/exec/util/Batch.html" title="type parameter in Batch">T</a>&gt;&nbsp;publisher()</pre>
<div class="block">Creates a publisher that emits the promised values.
 <p>
 This method differs to <a href="../../../ratpack/exec/util/Batch.html#yield--"><code>yield()</code></a> and <a href="../../../ratpack/exec/util/Batch.html#yieldAll--"><code>yieldAll()</code></a> in that items are emitted as soon as they have completed.
 As such, it is more appropriate when wanting to stream the results in some fashion.
 <p>
 Items are emitted in completion order, not source order.
 <p>
 Processing is effectively halted when the first error occurs.
 <p>
 The returned publisher is NOT <a href="../../../ratpack/stream/Streams.html#bindExec-org.reactivestreams.Publisher-"><code>execution bound</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a publisher for the batch</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../ratpack/exec/util/ParallelBatch.html" title="interface in ratpack.exec.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?ratpack/exec/util/Batch.html" target="_top">Frames</a></li>
<li><a href="Batch.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
